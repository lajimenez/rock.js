var rock={version:"r1",reservedProperties:["super_","isInterface_","interfaces_","nextSuperToCall_"],namespace:function(a){a=a.split(".");var b=window,c,d;for(c=0;c<a.length;c++)d=b[a[c]],this.isNullOrUndefined(d)&&(b[a[c]]={}),b=b[a[c]]},isReservedProperty:function(a){if(this.isNullOrUndefined(a))return!1;for(var b=0;b<this.reservedProperties.length;b++)if(a==this.reservedProperties[b])return!0;return!1},interface_:function(a){if(!this.isFunction(a))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("NO_FUNCTION_TYPE"));
a.prototype.isInterface_=!0},isFunction:function(a){return typeof a===rock.constants.TYPE_FUNCTION},isInterface_:function(a){return!this.isFunction(a)||this.isNullOrUndefined(a.prototype.isInterface_)?!1:a.prototype.isInterface_},implements_:function(a,b){if(!this.isFunction(a)||!this.isFunction(b))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("NO_FUNCTION_TYPE"));if(this.isInterface_(a))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INTERFACE_CANT_IMPLEMENT"));
if(!this.isInterface_(b))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("ONLY_INTERFACE_CAN_BE_IMPLEMENTED"));this.isNullOrUndefined(a.prototype.interfaces_)&&(a.prototype.interfaces_=[]);a.prototype.interfaces_.push(b);for(var c in b.prototype)void 0===a.prototype[c]&&!this.isReservedProperty(c)&&(a.prototype[c]=b.prototype[c])},extends_:function(a,b){if(!this.isFunction(a)||!this.isFunction(b))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("NO_FUNCTION_TYPE"));
if(this.isInterface_(a)!==this.isInterface_(b))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INVALID_EXTENSION"));if(!this.isInterface_(a)&&!this.isNullOrUndefined(a.prototype.interfaces_)&&0<a.prototype.interfaces_.length)throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INVALID_INHERITANCE_EXTENDS_BEFORE_IMPLEMENTS"));a.prototype.super_=b;if(!this.isNullOrUndefined(b.prototype))for(var c in b.prototype)void 0===a.prototype[c]&&!this.isReservedProperty(c)&&
(a.prototype[c]=b.prototype[c])},super_:function(a,b){var c=a.nextSuperToCall_||a.super_;this.isNullOrUndefined(c)||rock.invokeSuper(a,a.constructor,c,b)},invokeSuper:function(a,b,c,d){a.nextSuperToCall_=c.prototype.super_;c.apply(a,d);delete a.nextSuperToCall_},addProperties:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},new_:function(a,b){function c(){a.apply(this,b)}c.prototype=a.prototype;return new c},super_method:function(a,b,c,d){b=b.prototype.super_;if(this.isNullOrUndefined(b))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INHERITANCE_NO_SUPER_METHOD_IN_SUPERCLASS"));
c=b.prototype[c];if(!this.isNullOrUndefined(c)&&this.isFunction(c))return c.apply(a,d);throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INHERITANCE_NO_SUPER_METHOD_IN_SUPERCLASS"));},instanceof_:function(a,b){if(a.constructor===b)return!0;var c=a.super_,d=a.interfaces_,e=null;if(!this.isNullOrUndefined(d))for(var f=0;f<d.length;f++)for(e=d[f];!this.isNullOrUndefined(e);){if(e===b)return!0;e=e.prototype.super_}return this.isNullOrUndefined(c)?typeof a===rock.constants.TYPE_OBJECT&&
b===Object?!0:typeof a===b:this.instanceof_(c.prototype,b)},abstract_:function(){throw new rock.error.RockError(rock.resource.rockResourceManager.getString("CALLED_METHOD_WITH_NO_IMPLEMENTATION"));},isNullOrUndefined:function(a){return void 0===a||null===a},createEventHandler:function(a,b,c){var d=[],e;if(!rock.isNullOrUndefined(c))for(e=0;e<c.length;e++)d.push(c[e]);return function(c){c=[c];c=c.concat(d);b.apply(a,c)}},hasProperty:function(a,b){return b in a&&!this.isFunction(a[b])},hasMethod:function(a,
b){return this.isFunction(a[b])},replaceByUserAgentImplementation:function(a,b,c){c&&(a=a.prototype);c=a[b+"_"+rock.environment.userAgentFamily];this.isNullOrUndefined(c)||(a[b]=c)},stringContains:function(a,b){return this.isNullOrUndefined(a)||this.isNullOrUndefined(b)?!1:0<=a.indexOf(b)},exposedObjects:{},expose:function(a,b,c){this.exposedObjects[a]=this.exposedObjects[a]||{};this.exposedObjects[a][b]=c},getExposed:function(a,b){var c=this.exposedObjects[a];return rock.isNullOrUndefined(c)?null:
c[b]}};rock.namespace("rock.error");rock.error.RockError=function(a){this.message=a};rock.error.RockError.prototype.toString=function(){return rock.resource.rockResourceManager.getString("ROCK_ERROR_MSG",[this.message])};rock.constants={CONTEXT_CANVAS_2D:"CONTEXT_CANVAS_2D",CONTEXT_WEBGL:"CONTEXT_WEBGL",CANVAS_TAG:"canvas",CANVAS_CONTEXT_2D:"2d",CANVAS_CONTEXT_WEBGL:"webgl",CANVAS_CONTEXT_EXPERIMENTAL_WEBGL:"experimental-webgl",CANVAS_CONTEXT_WEBKIT_3D:"webkit-3d",CANVAS_CONTEXT_MOZ_WEBGL:"moz-webgl",DIV_TAG:"div",SPAN_TAG:"span",INPUT_TAG:"input",INPUT_TYPE_BUTTON:"button",CSS_DISPLAY:"display",CSS_POSITION:"position",CSS_WIDTH:"width",CSS_HEIGHT:"height",CSS_TOP:"top",CSS_LEFT:"left",CSS_FONT_FAMILY:"font-family",
CSS_FONT_SIZE:"font-size",CSS_COLOR:"color",CSS_BACKGROUND_COLOR:"background-color",CSS_OVERFLOW:"overflow",CSS_TEXT_ALIGN:"text-align",CSS_POSITION_RELATIVE:"relative",CSS_POSITION_ABSOLUTE:"absolute",CSS_DISPLAY_NONE:"none",CSS_DISPLAY_BLOCK:"block",CSS_OVERFLOW_HIDDEN:"hidden",USER_AGENT_FAMILY_CHROME:"CH",USER_AGENT_FAMILY_FIREFOX:"FI",USER_AGENT_FAMILY_INTERNET_EXPLORER:"IE",USER_AGENT_NAVIGATOR_TEXT_CHROME:"Chrome",USER_AGENT_NAVIGATOR_TEXT_FIREFOX:"Firefox",USER_AGENT_NAVIGATOR_TEXT_INTERNET_EXPLORER:"MSIE",
USER_AGENT_NAVIGATOR_TEXT_INTERNET_EXPLORER_TRIDENT:"Trident",TYPE_FUNCTION:"function",TYPE_OBJECT:"object",HTML_DOM_EVENT_MOUSE_DOWN:"mousedown",HTML_DOM_EVENT_MOUSE_UP:"mouseup",HTML_DOM_EVENT_CLICK:"click",HTML_DOM_EVENT_DBLCLICK:"dblclick",HTML_DOM_EVENT_MOUSE_MOVE:"mousemove",HTML_DOM_EVENT_MOUSE_WHEEL:"mousewheel",HTML_DOM_EVENT_MOUSE_WHEEL_FI:"DOMMouseScroll",HTML_DOM_EVENT_MOUSE_OVER:"mouseover",HTML_DOM_EVENT_MOUSE_LEAVE:"mouseleave",HTML_DOM_EVENT_KEY_DOWN:"keydown",HTML_DOM_EVENT_KEY_UP:"keyup",
HTML_DOM_EVENT_KEY_PRESS:"keypress",HTML_DOM_EVENT_MOUSE_BUTTON_LEFT:0,HTML_DOM_EVENT_MOUSE_BUTTON_WHEEL:1,HTML_DOM_EVENT_MOUSE_BUTTON_RIGHT:2,WEBGL_CONTEXT_LOST_EVENT:"webglcontextlost",WEBGL_CONTEXT_RESTORED_EVENT:"webglcontextrestored",ROCK_EVENT_CONTEXT_LOST:"contextlost",ROCK_EVENT_CONTEXT_RESTORED:"contextrestored",ROCK_EVENT_MOUSE_DOWN:"mousedown",ROCK_EVENT_MOUSE_UP:"mouseup",ROCK_EVENT_CLICK:"click",ROCK_EVENT_DBLCLICK:"dblclick",ROCK_EVENT_MOUSE_MOVE:"mousemove",ROCK_EVENT_MOUSE_WHEEL:"mousewheel",
ROCK_EVENT_MOUSE_OVER:"mouseover",ROCK_EVENT_MOUSE_LEAVE:"mouseleave",ROCK_EVENT_KEY_DOWN:"keydown",ROCK_EVENT_KEY_UP:"keyup",ROCK_EVENT_KEY_PRESS:"keypress",ROCK_EVENT_MOUSE_BUTTON_LEFT:0,ROCK_EVENT_MOUSE_BUTTON_WHEEL:1,ROCK_EVENT_MOUSE_BUTTON_RIGHT:2,HTTP_METHOD_GET:"GET",HTTP_METHOD_POST:"POST",ROCK_STYLE_ID:"ROCK_STYLE_ID",DEFAULT_ROCK_LOCALE:"en",DEFAULT_FONT_TYPE:"Arial",DEFAULT_FONT_SIZE:16,RESOURCE_TYPE_STRING:"RESOURCE_TYPE_STRING",RESOURCE_TYPE_IMAGE:"RESOURCE_TYPE_IMAGE",RESOURCE_TYPE_AUDIO:"RESOURCE_TYPE_AUDIO",
RESOURCE_TYPE_JSON:"RESOURCE_TYPE_JSON"};rock.environment={userAgent:navigator.userAgent,userAgentFamily:null,updateUserAgentFamily:function(){var a=this.userAgent;rock.stringContains(a,rock.constants.USER_AGENT_NAVIGATOR_TEXT_CHROME)?this.userAgentFamily=rock.constants.USER_AGENT_FAMILY_CHROME:rock.stringContains(a,rock.constants.USER_AGENT_NAVIGATOR_TEXT_FIREFOX)?this.userAgentFamily=rock.constants.USER_AGENT_FAMILY_FIREFOX:rock.stringContains(a,rock.constants.USER_AGENT_NAVIGATOR_TEXT_INTERNET_EXPLORER)?this.userAgentFamily=rock.constants.USER_AGENT_FAMILY_INTERNET_EXPLORER:
rock.stringContains(a,rock.constants.USER_AGENT_NAVIGATOR_TEXT_INTERNET_EXPLORER_TRIDENT)&&(this.userAgentFamily=rock.constants.USER_AGENT_FAMILY_INTERNET_EXPLORER)}};rock.environment.updateUserAgentFamily();rock.console={log:function(a){rock.console.dummyConsoleOperation(a)},warn:function(a){rock.console.dummyConsoleOperation(a)},info:function(a){rock.console.dummyConsoleOperation(a)},debug:function(a){rock.console.dummyConsoleOperation(a)},trace:function(){rock.console.dummyConsoleOperation()},dummyConsoleOperation:function(){}};
(function(){console&&(console.log&&(rock.console.log=function(a){console.log(a)}),console.warn&&(rock.console.warn=function(a){console.warn(a)}),console.info&&(rock.console.info=function(a){console.info(a)}),console.debug&&(rock.console.debug=function(a){console.debug(a)}),console.trace&&(rock.console.trace=function(){console.trace()}))})();rock.timer={registeredFunctions:[],isRunning:!1,request:null,registerTimerFunction:function(a,b,c){this.registeredFunctions.push({context:a,func:b,params:c})},unregisterTimerFunction:function(a){var b,c,d;d=this.registeredFunctions;for(b=0;b<d.length;b++)c=d[b],a===c.func&&rock.util.JsUtils.removeByValueFromArray(d,c)},start:function(){this.isRunning||(this.request=requestAnimationFrame(this.rockTimerHandle),this.isRunning=!0)},stop:function(){this.isRunning&&(cancelAnimationFrame(this.request),this.isRunning=
!1)},rockTimerHandle:function(){var a,b,c;b=rock.timer.registeredFunctions;rock.timer.request=requestAnimationFrame(rock.timer.rockTimerHandle);for(a=0;a<b.length;a++)c=b[a],c.func.apply(c.context,c.params)},requestAnimationFrame:function(a){return setTimeout(a,16)},cancelAnimationFrame:function(a){clearTimeout(a)}};
(function(){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||rock.timer.requestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||rock.timer.cancelAnimationFrame})();rock.namespace("rock.i18n");
rock.i18n.rockDefaultLocaleInfo={locale:rock.constants.DEFAULT_ROCK_LOCALE,messages:{ROCK_ERROR_MSG:"RockError: {0}",NO_FUNCTION_TYPE:"No function type",INTERFACE_CANT_IMPLEMENT:"Interface can't implements nothing",ONLY_INTERFACE_CAN_BE_IMPLEMENTED:"Only interface can be implemented",INVALID_EXTENSION:"Classes must extend classes and interfaces must extend interfaces",INVALID_INHERITANCE_EXTENDS_BEFORE_IMPLEMENTS:'Invalid inheritance: "extends" must be before any "implements"',INHERITANCE_NO_SUPER_METHOD_IN_SUPERCLASS:"It doesn't exists a super method in any super class",
CALLED_METHOD_WITH_NO_IMPLEMENTATION:"Called method with no implementation.",NO_GET_CONTEXT_CANVAS:"No getContext available",NO_CONTEXT_CANVAS_AVAILABLE:"Context not available",INVALID_ROCK_CONTEXT_CANVAS_TYPE:"Invalid rock canvas type",NO_WINDOW_SYSTEM:"No window system",AJAX_NOT_SUPPORTED:"Ajax not supported",INVALID_RESOURCE_TYPE:"Invalid resource type",ERROR_PARAMS_LOAD_RESOURCES:"Incorrect params for loading resources",RESOURCE_NOT_AVAILABLE:"Resource not available",SHADER_NOT_COMPILED:"Shader not compiled",
PROGRAM_NOT_LINKED:"Program not linked",CAMERA_INVALID_VALUES:"Invalid camera values",INVALID_COMPONENT_OPERATION:"Invalid component operation",TEST_INVALID_TYPE:'Type for object must inherit from type "rock.test.Test"',TEST_SUITE_RESULT_OK:"The test suite has finished OK\n",TEST_SUITE_RESULT_KO:"The test suite has ERRORS\n",TEST_RESULT_OK:"The test {0} has finished well\n",TEST_RESULT_KO:"The test {0} has failed\n",RESOURCE_WINDOW_LOADING_LABEL:"Loading..."}};rock.namespace("rock.js");rock.js.Array=function(a,b){this.length=0;var c=rock.js.Array.DEFAULT_INITIAL_CAPACITY;!rock.util.JsUtils.isNullOrUndefined(a)&&0<a&&(c=a);this.values=Array(c);this.capacity=c;this.resizeIncrement=rock.js.Array.DEFAULT_RESIZE_INCREMENT;!rock.util.JsUtils.isNullOrUndefined(b)&&0<b&&(this.resizeIncrement=b)};rock.js.Array.DEFAULT_INITIAL_CAPACITY=10;rock.js.Array.DEFAULT_RESIZE_INCREMENT=5;
rock.js.Array.prototype.resizeValues=function(){var a=this.resizeIncrement,b=this.values,c;for(c=0;c<a;c++)b.push(null);this.capacity+=a};rock.js.Array.prototype.addValue=function(a){this.capacity==this.length&&this.resizeValues();this.values[this.length]=a;this.length++};rock.js.Array.prototype.removeValue=function(a){var b=this.values,c=this.length,d=!1,e,f;for(e=0;e<c;e++)if(b[e]===a){d=!0;f=e;break}if(d){for(e=f;e<c-1;e++)b[e]=b[e+1];this.length--}return d};
rock.js.Array.prototype.clear=function(a){this.length=0;if(!rock.util.JsUtils.isNullOrUndefined(a)&&a){var b=this.values;for(a=0;a<b.length;a++)b[a]=null}};rock.js.Array.prototype.adjustCapacity=function(){this.capacity=this.values.length=this.length};rock.js.Array.prototype.getValue=function(a){return this.values[a]};rock.js.Array.prototype.getLength=function(){return this.length};rock.js.Array.prototype.getCapacity=function(){return this.capacity};rock.namespace("rock.util");
rock.util.JsUtils={removeByValueFromArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a.splice(c,1),!0;return!1},clearArray:function(a){a.length=0},cloneArray:function(a){if(null==a)return null;var b=[],c=a.length,d;for(d=0;d<c;d++)b[d]=a[d];return b},isNullOrUndefined:rock.isNullOrUndefined,getAsHex:function(a){for(a=a.toString(16);2>a.length;)a="0"+a;return a.toUpperCase()},stringStartsWith:function(a,b){return this.isNullOrUndefined(a)||this.isNullOrUndefined(b)?!1:0==a.indexOf(b)},
stringEndsWith:function(a,b){if(this.isNullOrUndefined(a)||this.isNullOrUndefined(b))return!1;var c=a.lastIndexOf(b);return 0>c?!1:c==a.length-b.length},stringContains:rock.stringContains,round:function(a,b){var c=Math.pow(10,b);return(Math.round(a*c)/c).toFixed(b)},isNumerical:function(a){return!isNaN(a-0)},generateUUID:function(){return this.getRandomHexNumbersArray(8)+"-"+this.getRandomHexNumbersArray(4)+"-4"+this.getRandomHexNumbersArray(3)+"-"+this.getRandomNumber(8,11).toString(16)+this.getRandomHexNumbersArray(3)+
"-"+this.getRandomHexNumbersArray(12)},getRandomHexNumbersArray:function(a){for(var b="",c=0;c<a;c++)b+=this.getRandomNumber(0,15).toString(16);return b},getRandomNumber:function(a,b){return Math.floor(Math.random()*(b-a+1))+a}};rock.namespace("rock.util");
rock.util.DOMUtils={getElementById:function(a){return document.getElementById(a)},addEventListener:function(a,b,c,d){var e=!1;rock.util.JsUtils.isNullOrUndefined(d)||(e=d);a.addEventListener(b,c,e)},removeEventListener:function(a,b,c,d){var e=!1;rock.util.JsUtils.isNullOrUndefined(d)||(e=d);a.removeEventListener(b,c,e)},createHTMLElement:function(a){return document.createElement(a)},createCanvas:function(a,b,c){var d=this.createHTMLElement(rock.constants.CANVAS_TAG);d.setAttribute("width",a+"px");
d.setAttribute("height",b+"px");rock.isNullOrUndefined(c)||d.setAttribute("tabindex",c);return d}};rock.namespace("rock.util");rock.util.MouseUtils={resolveEventCoords:function(a){var b=a.currentTarget.getBoundingClientRect();return{x:a.clientX-b.left,y:a.clientY-b.top}},resolveEventCoords_CH:function(a){return{x:a.offsetX,y:a.offsetY}},resolveEventCoords_IE:this.resolveEventCoords_CH};rock.replaceByUserAgentImplementation(rock.util.MouseUtils,"resolveEventCoords");rock.namespace("rock.util");
rock.util.WebGlUtils={createAndCompileShader:function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);if(!a.getShaderParameter(b,a.COMPILE_STATUS)&&!a.isContextLost())throw new rock.error.RockError(rock.resource.rockResourceManager.getString("SHADER_NOT_COMPILED"));return b},createProgram:function(a,b,c){var d=a.createProgram();a.attachShader(d,b);a.attachShader(d,c);this.linkProgram(a,d);return d},linkProgram:function(a,b){a.linkProgram(b);if(!a.getProgramParameter(b,a.LINK_STATUS)&&
!a.isContextLost())throw new rock.error.RockError(rock.resource.rockResourceManager.getString("PROGRAM_NOT_LINKED"));},populateArrayBufferAttribute:function(a,b,c,d,e){var f=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);b=a.getAttribLocation(b,c);a.enableVertexAttribArray(b);a.vertexAttribPointer(b,e,a.FLOAT,a.FALSE,0,0);return f},populateElementArrayBuffer:function(a,b){var c=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c);
a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(b),a.STATIC_DRAW);return c},populateTexture:function(a,b){var c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.getHTMLImage());return c},disableAllVertexAttribArray:function(a,
b){var c=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),d;for(d=0;d<c;d++)a.disableVertexAttribArray(d)}};rock.namespace("rock.util");rock.util.TextUtils={measureTextWidth:function(a,b){this.context.font=b.toCanvasFormat();var c=this.context.measureText(a);return Math.ceil(c.width)},measureTextHeight:function(a,b){return Math.ceil(1.2*b.getSize())}};rock.util.TextUtils.context=rock.util.DOMUtils.createCanvas(1,1).getContext(rock.constants.CANVAS_CONTEXT_2D);rock.namespace("rock.event");rock.event.Event=function(a){this.id=null;rock.util.JsUtils.isNullOrUndefined(a)||(this.id=a)};rock.event.Event.prototype.setId=function(a){this.id=a};rock.event.Event.prototype.getId=function(){return this.id};rock.event.Event.prototype.setSource=function(a){this.source=a};rock.event.Event.prototype.getSource=function(){return this.source};rock.namespace("rock.event");rock.event.MouseEvent=function(a){rock.super_(this,[a]);this.DOMMouseEvent=this.y=this.x=null};rock.extends_(rock.event.MouseEvent,rock.event.Event);
rock.event.MouseEvent.prototype.getButton=function(){var a=this.DOMMouseEvent;if(rock.util.JsUtils.isNullOrUndefined(a))return null;var a=a.button,b=null;a==rock.constants.HTML_DOM_EVENT_MOUSE_BUTTON_LEFT?b=rock.constants.ROCK_EVENT_MOUSE_BUTTON_LEFT:a==rock.constants.HTML_DOM_EVENT_MOUSE_BUTTON_WHEEL?b=rock.constants.ROCK_EVENT_MOUSE_BUTTON_WHEEL:a==rock.constants.HTML_DOM_EVENT_MOUSE_BUTTON_RIGHT&&(b=rock.constants.ROCK_EVENT_MOUSE_BUTTON_RIGHT);return b};rock.event.MouseEvent.prototype.getX=function(){return this.x};
rock.event.MouseEvent.prototype.setX=function(a){this.x=a};rock.event.MouseEvent.prototype.getY=function(){return this.y};rock.event.MouseEvent.prototype.setY=function(a){this.y=a};rock.event.MouseEvent.prototype.getDOMMouseEvent=function(){return this.DOMMouseEvent};rock.event.MouseEvent.prototype.setDOMMouseEvent=function(a){this.DOMMouseEvent=a};rock.namespace("rock.event");rock.event.MouseWheelEvent=function(a){rock.super_(this,[a]);this.DOMMouseEvent=null};rock.extends_(rock.event.MouseWheelEvent,rock.event.Event);rock.event.MouseWheelEvent.prototype.getDOMMouseEvent=function(){return this.DOMMouseEvent};rock.event.MouseWheelEvent.prototype.setDOMMouseEvent=function(a){this.DOMMouseEvent=a};rock.event.MouseWheelEvent.prototype.getDelta=function(){var a=this.DOMMouseEvent;return rock.util.JsUtils.isNullOrUndefined(a)?null:a.wheelDelta};
rock.event.MouseWheelEvent.prototype.getDelta_FI=function(){var a=this.DOMMouseEvent;return rock.util.JsUtils.isNullOrUndefined(a)?null:-a.detail};rock.replaceByUserAgentImplementation(rock.event.MouseWheelEvent,"getDelta",!0);rock.namespace("rock.event");rock.event.KeyEvent=function(a){rock.super_(this,[a]);this.DOMMouseEvent=null};rock.extends_(rock.event.KeyEvent,rock.event.Event);rock.event.KeyEvent.prototype.getDOMMouseEvent=function(){return this.DOMMouseEvent};rock.event.KeyEvent.prototype.setDOMMouseEvent=function(a){this.DOMMouseEvent=a};rock.event.KeyEvent.prototype.getKey=function(){return this.DOMMouseEvent.keyCode};rock.event.KeyEvent.prototype.isShiftPressed=function(){return this.DOMMouseEvent.shiftKey};
rock.event.KeyEvent.prototype.isAltPressed=function(){return this.DOMMouseEvent.altKey};rock.event.KeyEvent.prototype.isCtrlPressed=function(){return this.DOMMouseEvent.ctrlKey};rock.event.KeyEvent.prototype.toString=function(){return"key pressed: "+this.getKey()+"\nshift pressed: "+this.isShiftPressed()+"\nalt pressed: "+this.isAltPressed()+"\nctrl pressed: "+this.isCtrlPressed()};rock.namespace("rock.event");rock.event.EventDispatcher=function(){this.handlersEventElements=[]};rock.event.EventDispatcher.prototype.dispatchEvent=function(a){a.setSource(this);var b=this.getHandlersEventElement(a.getId()),c;if(null!=b){c=b.handlers;for(b=0;b<c.length;b++)c[b](a)}};
rock.event.EventDispatcher.prototype.addEventListener=function(a,b){var c=this.getHandlersEventElement(a);null==c&&(c=new rock.event.EventDispatcherHandlersEventElement,c.eventId=a,this.handlersEventElements.push(c));c.handlers.push(b)};rock.event.EventDispatcher.prototype.removeEventListener=function(a,b){var c=this.getHandlersEventElement(a);null!=c&&rock.util.JsUtils.removeByValueFromArray(c.handlers,b)};
rock.event.EventDispatcher.prototype.removeAllEventListener=function(a){a=this.getHandlersEventElement(a);null!=a&&rock.util.JsUtils.clearArray(a.handlers)};rock.event.EventDispatcher.prototype.getHandlersEventElement=function(a){var b,c=this.handlersEventElements,d;for(b=0;b<c.length;b++)if(d=c[b],a===d.eventId)return d;return null};rock.event.EventDispatcherHandlersEventElement=function(){this.eventId=null;this.handlers=[]};rock.namespace("rock.resource");rock.resource.Resource=function(a,b,c,d){this.id=a;this.type=b;this.value=c;this.source=d};rock.resource.Resource.prototype.getId=function(){return this.id};rock.resource.Resource.prototype.getType=function(){return this.type};rock.resource.Resource.prototype.getValue=function(){return this.value};rock.resource.Resource.prototype.getSource=function(){return this.source};rock.namespace("rock.resource");rock.resource.Resources=function(a){this.locale=a;rock.util.JsUtils.isNullOrUndefined(this.locale)&&(this.locale=rock.constants.DEFAULT_ROCK_LOCALE);this.resources={}};rock.resource.Resources.prototype.getResourcesByType=function(a){this.resources[a]=this.resources[a]||{};return this.resources[a]};rock.resource.Resources.prototype.addResource=function(a,b,c){this.getResourcesByType(a)[b]=c};rock.resource.Resources.prototype.getResource=function(a,b){return this.getResourcesByType(a)[b]};rock.namespace("rock.resource");rock.resource.ResourceManager=function(){this.locale=this.DEFAULT_LOCALE=rock.constants.DEFAULT_ROCK_LOCALE;this.resources={};this.defaultResources=this.createResourceObject(this.DEFAULT_LOCALE)};rock.resource.ResourceManager.prototype.createResourceObject=function(a){rock.util.JsUtils.isNullOrUndefined(this.resources[a])&&(this.resources[a]=new rock.resource.Resources(a));return this.resources[a]};
rock.resource.ResourceManager.prototype.resolveLocale=function(a){var b=a;rock.util.JsUtils.isNullOrUndefined(a)&&(b=this.DEFAULT_LOCALE);return b};rock.resource.ResourceManager.prototype.getResources=function(a){a=this.resolveLocale(a);var b=this.resources[a];rock.util.JsUtils.isNullOrUndefined(b)&&(b=this.createResourceObject(a));return b};rock.resource.ResourceManager.prototype.addResource=function(a,b,c,d){this.getResources(d).addResource(a,b,c)};
rock.resource.ResourceManager.prototype.addString=function(a,b,c){this.addResource(rock.constants.RESOURCE_TYPE_STRING,a,b,c)};rock.resource.ResourceManager.prototype.loadStrings=function(a){var b=a.locale;a=a.messages;for(var c in a)a.hasOwnProperty(c)&&this.addString(c,a[c],b)};rock.resource.ResourceManager.prototype.addImage=function(a,b,c){this.addResource(rock.constants.RESOURCE_TYPE_IMAGE,a,b,c)};
rock.resource.ResourceManager.prototype.addAudio=function(a,b,c){this.addResource(rock.constants.RESOURCE_TYPE_AUDIO,a,b,c)};rock.resource.ResourceManager.prototype.getResource=function(a,b,c){rock.util.JsUtils.isNullOrUndefined(c)&&(c=this.locale);c=this.getResources(c).getResource(a,b);rock.util.JsUtils.isNullOrUndefined(c)&&(c=this.defaultResources.getResource(a,b));return c};
rock.resource.ResourceManager.prototype.getString=function(a,b,c){c=this.getResource(rock.constants.RESOURCE_TYPE_STRING,a,c);rock.util.JsUtils.isNullOrUndefined(c)&&(c=a);rock.util.JsUtils.isNullOrUndefined(b)&&(b=[]);var d;for(a=0;a<b.length;a++)d="{"+a+"}",c=c.replace(d,b[a]);return c};rock.resource.ResourceManager.prototype.getImage=function(a,b){return this.getResource(rock.constants.RESOURCE_TYPE_IMAGE,a,b)};
rock.resource.ResourceManager.prototype.getAudio=function(a,b){return this.getResource(rock.constants.RESOURCE_TYPE_AUDIO,a,b)};rock.resource.ResourceManager.prototype.getLocale=function(){return this.locale};rock.resource.ResourceManager.prototype.setLocale=function(a){this.locale=a};rock.resource.rockResourceManager=new rock.resource.ResourceManager;rock.resource.rockResourceManager.loadStrings(rock.i18n.rockDefaultLocaleInfo);rock.namespace("rock.resource.event");rock.resource.event.ResourceLoadedEvent=function(){rock.super_(this,[rock.resource.event.ResourceLoadedEvent.RESOURCE_LOADED]);this.resource=null;this.loaded=!1};rock.extends_(rock.resource.event.ResourceLoadedEvent,rock.event.Event);rock.resource.event.ResourceLoadedEvent.RESOURCE_LOADED="RESOURCE_LOADED";rock.resource.event.ResourceLoadedEvent.prototype.getLoaded=function(){return this.loaded};
rock.resource.event.ResourceLoadedEvent.prototype.setLoaded=function(a){this.loaded=a};rock.resource.event.ResourceLoadedEvent.prototype.getResource=function(){return this.resource};rock.resource.event.ResourceLoadedEvent.prototype.setResource=function(a){this.resource=a};rock.namespace("rock.resource.event");rock.resource.event.ResourceLoaderComplete=function(){rock.super_(this,[rock.resource.event.ResourceLoaderComplete.RESOURCE_LOADER_COMPLETE])};rock.extends_(rock.resource.event.ResourceLoaderComplete,rock.event.Event);rock.resource.event.ResourceLoaderComplete.RESOURCE_LOADER_COMPLETE="RESOURCE_LOADER_COMPLETE";rock.namespace("rock.resource.event");rock.resource.event.ResourceWindowCompleteEvent=function(){rock.super_(this,[rock.resource.event.ResourceWindowCompleteEvent.RESOURCE_WINDOW_COMPLETE])};rock.extends_(rock.resource.event.ResourceWindowCompleteEvent,rock.event.Event);rock.resource.event.ResourceWindowCompleteEvent.RESOURCE_WINDOW_COMPLETE="RESOURCE_WINDOW_COMPLETE";rock.namespace("rock.resource.loader");rock.resource.loader.ResourceLoaderElement=function(a,b,c,d){this.id=a;this.type=b;this.HTTPParams=c;this.weight=d};rock.resource.loader.ResourceLoaderElement.prototype.getId=function(){return this.id};rock.resource.loader.ResourceLoaderElement.prototype.getType=function(){return this.type};rock.resource.loader.ResourceLoaderElement.prototype.getHTTPParams=function(){return this.HTTPParams};rock.resource.loader.ResourceLoaderElement.prototype.getWeight=function(){return this.weight};rock.namespace("rock.resource.loader");
rock.resource.loader.ResourceLoaderManager=function(){rock.super_(this,arguments);this.DEFAULT_MAX_CONCURRENT_LOADING_ELEMENTS=2;this.defaultWeight=1;this.loadedResources=[];this.errorResources=[];this.nextElementToLoad=this.totalLoadExpected=this.currentLoad=this.elemsToLoad=this.currentLoadedElem=0;this.maxConcurrentLoadingElements=this.DEFAULT_MAX_CONCURRENT_LOADING_ELEMENTS;this.elems=null;this.loadersHandler=[];this.registerLoader(rock.constants.RESOURCE_TYPE_IMAGE,new rock.resource.loader.ImageResourceLoader);
this.registerLoader(rock.constants.RESOURCE_TYPE_AUDIO,new rock.resource.loader.AudioResourceLoader);this.registerLoader(rock.constants.RESOURCE_TYPE_JSON,new rock.resource.loader.JSONResourceLoader)};rock.extends_(rock.resource.loader.ResourceLoaderManager,rock.event.EventDispatcher);rock.resource.loader.ResourceLoaderManager.prototype.registerLoader=function(a,b){var c={type:a,loader:b};b.setResourceLoaderManager(this);this.loadersHandler.push(c)};
rock.resource.loader.ResourceLoaderManager.prototype.unregisterLoader=function(a){a=this.getLoader(a);return null!=a?(rock.util.JsUtils.removeByValueFromArray(this.loadersHandler,a),!0):!1};rock.resource.loader.ResourceLoaderManager.prototype.getLoader=function(a){var b=this.loadersHandler,c=null,d;for(d=0;d<b.length;d++)if(c=b[d],c.type==a)return c.loader;return null};
rock.resource.loader.ResourceLoaderManager.prototype.loadResources=function(a){this.elems=a;if(rock.isNullOrUndefined(a)||0==a.length)throw new rock.error.RockError(rock.resource.rockResourceManager.getString("ERROR_PARAMS_LOAD_RESOURCES"));rock.util.JsUtils.clearArray(this.loadedResources);rock.util.JsUtils.clearArray(this.errorResources);var b,c;for(b=0;b<a.length;b++)c=a[b],rock.isNullOrUndefined(c.getWeight())&&(c.weight=this.defaultWeight);this.currentLoadedElem=0;this.elemsToLoad=a.length;for(b=
this.nextElementToLoad=this.currentLoad=0;b<a.length;b++)c=a[b],this.totalLoadExpected+=c.getWeight();for(b=0;b<this.maxConcurrentLoadingElements;b++)this.loadNextResource()};
rock.resource.loader.ResourceLoaderManager.prototype.loadNextResource=function(){if(this.nextElementToLoad!=this.elemsToLoad){var a,b;a=this.elems[this.nextElementToLoad];this.nextElementToLoad++;b=this.getLoader(a.type);if(null!=b)b.loadResource(a);else throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INVALID_RESOURCE_TYPE"));}};
rock.resource.loader.ResourceLoaderManager.prototype.onResourceLoadEvent=function(a,b,c){this.currentLoadedElem++;this.currentLoad+=b.getWeight();b=new rock.resource.Resource(b.getId(),b.getType(),c,b.getHTTPParams());a?this.loadedResources.push(b):this.errorResources.push(b);this.throwResourceLoadedEvent(a,b);this.currentLoadedElem==this.elemsToLoad?this.throwResourceLoaderComplete():this.loadNextResource()};
rock.resource.loader.ResourceLoaderManager.prototype.throwResourceLoadedEvent=function(a,b){var c=new rock.resource.event.ResourceLoadedEvent;c.setLoaded(a);c.setResource(b);this.dispatchEvent(c)};rock.resource.loader.ResourceLoaderManager.prototype.throwResourceLoaderComplete=function(){var a=new rock.resource.event.ResourceLoaderComplete;this.dispatchEvent(a)};rock.resource.loader.ResourceLoaderManager.prototype.getPercentLoaded=function(){return 100*this.currentLoad/this.totalLoadExpected};
rock.resource.loader.ResourceLoaderManager.prototype.hasErrors=function(){return 0<this.errorResources.length};rock.resource.loader.ResourceLoaderManager.prototype.getLoadedResource=function(a){var b,c;for(b=0;b<this.loadedResources.length;b++)if(c=this.loadedResources[b],c.id==a)return c;return null};rock.namespace("rock.resource.loader");rock.resource.loader.AbstractResourceLoader=function(){this.resourceLoaderManager=null};rock.resource.loader.AbstractResourceLoader.prototype.setResourceLoaderManager=function(a){this.resourceLoaderManager=a};rock.resource.loader.AbstractResourceLoader.prototype.loadResource=rock.abstract_;rock.namespace("rock.resource.loader");rock.resource.loader.ImageResourceLoader=function(){rock.super_(this,arguments)};rock.extends_(rock.resource.loader.ImageResourceLoader,rock.resource.loader.AbstractResourceLoader);
rock.resource.loader.ImageResourceLoader.prototype.loadResource=function(a){var b=new Image;b.id=a.id;b.onload=rock.createEventHandler(this,this.onLoadImage,[a,b]);b.onerror=rock.createEventHandler(this,this.onErrorImage,[a,b]);b.onabort=rock.createEventHandler(this,this.onAbortImage,[a,b]);b.src=a.getHTTPParams().getUrl()};rock.resource.loader.ImageResourceLoader.prototype.onLoadImage=function(a,b,c){this.callResourceLoader(a,b,c,!0)};
rock.resource.loader.ImageResourceLoader.prototype.onErrorImage=function(a,b,c){this.callResourceLoader(a,b,c,!1)};rock.resource.loader.ImageResourceLoader.prototype.onAbortImage=function(a,b,c){this.callResourceLoader(a,b,c,!1)};rock.resource.loader.ImageResourceLoader.prototype.callResourceLoader=function(a,b,c,d){a=new rock.graphics.Image(c);this.resourceLoaderManager.onResourceLoadEvent(d,b,a)};rock.namespace("rock.resource.loader");rock.resource.loader.AudioResourceLoader=function(){rock.super_(this,arguments)};rock.extends_(rock.resource.loader.AudioResourceLoader,rock.resource.loader.AbstractResourceLoader);
rock.resource.loader.AudioResourceLoader.prototype.loadResource=function(a){var b=new Audio;b.id=a.id;b.addEventListener("loadeddata",rock.createEventHandler(this,this.onLoadAudio,[a,b]),!1);b.onerror=rock.createEventHandler(this,this.onErrorAudio,[a,b]);b.onabort=rock.createEventHandler(this,this.onAbortAudio,[a,b]);b.src=a.getHTTPParams().getUrl()};rock.resource.loader.AudioResourceLoader.prototype.onLoadAudio=function(a,b,c){this.callResourceLoader(a,b,c,!0)};
rock.resource.loader.AudioResourceLoader.prototype.onErrorAudio=function(a,b,c){this.callResourceLoader(a,b,c,!1)};rock.resource.loader.AudioResourceLoader.prototype.onAbortAudio=function(a,b,c){this.callResourceLoader(a,b,c,!1)};rock.resource.loader.AudioResourceLoader.prototype.callResourceLoader=function(a,b,c,d){a=new rock.audio.Audio(c);this.resourceLoaderManager.onResourceLoadEvent(d,b,a)};rock.namespace("rock.resource.loader");rock.resource.loader.JSONResourceLoader=function(){rock.super_(this,arguments);this.httpMethod=rock.constants.HTTP_METHOD_GET};rock.extends_(rock.resource.loader.JSONResourceLoader,rock.resource.loader.AbstractResourceLoader);
rock.resource.loader.JSONResourceLoader.prototype.loadResource=function(a){var b=new rock.network.ajax.AjaxRequest(a.getHTTPParams());b.addEventListener(rock.network.ajax.event.AjaxEvent.AJAX_EVENT,rock.createEventHandler(this,this.onAjaxEvent,[a]));b.doCall()};
rock.resource.loader.JSONResourceLoader.prototype.onAjaxEvent=function(a,b){if(a.getError())this.resourceLoaderManager.onResourceLoadEvent(!1,b,null);else{var c=JSON.parse(a.getResponseText());this.resourceLoaderManager.onResourceLoadEvent(!0,b,c)}};rock.namespace("rock.audio");rock.audio.Audio=function(a){this.HTMLAudio=a};rock.audio.Audio.prototype.getHTMLAudio=function(){return this.HTMLAudio};rock.audio.Audio.prototype.play=function(){this.HTMLAudio.play()};rock.namespace("rock.graphics");rock.graphics.Color=function(a,b,c,d){this.MAX_VALUE=255;this.red=a;this.green=b;this.blue=c;this.alpha=rock.isNullOrUndefined(d)?this.MAX_VALUE:d};rock.graphics.Color.TRANSPARENT=new rock.graphics.Color(0,0,0,0);rock.graphics.Color.BLACK=new rock.graphics.Color(0,0,0);rock.graphics.Color.WHITE=new rock.graphics.Color(255,255,255);rock.graphics.Color.RED=new rock.graphics.Color(255,0,0);rock.graphics.Color.GREEN=new rock.graphics.Color(0,255,0);
rock.graphics.Color.BLUE=new rock.graphics.Color(0,0,255);rock.graphics.Color.prototype.getRed=function(){return this.red};rock.graphics.Color.prototype.setRed=function(a){this.red=a};rock.graphics.Color.prototype.getGreen=function(){return this.green};rock.graphics.Color.prototype.setGreen=function(a){this.green=a};rock.graphics.Color.prototype.getBlue=function(){return this.blue};rock.graphics.Color.prototype.setBlue=function(a){this.blue=a};rock.graphics.Color.prototype.getAlpha=function(){return this.alpha};
rock.graphics.Color.prototype.setAlpha=function(a){this.alpha=a};rock.graphics.Color.prototype.getNormalizedRed=function(){return this.red/this.MAX_VALUE};rock.graphics.Color.prototype.getNormalizedGreen=function(){return this.green/this.MAX_VALUE};rock.graphics.Color.prototype.getNormalizedBlue=function(){return this.blue/this.MAX_VALUE};rock.graphics.Color.prototype.getNormalizedAlpha=function(){return this.alpha/this.MAX_VALUE};
rock.graphics.Color.prototype.getAsHex=function(){return"#"+rock.util.JsUtils.getAsHex(this.red)+rock.util.JsUtils.getAsHex(this.green)+rock.util.JsUtils.getAsHex(this.blue)};rock.graphics.Color.prototype.getAsRGBA=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.getNormalizedAlpha()+")"};rock.graphics.Color.fromHex=function(a){var b=parseInt(a.substring(1,3),16),c=parseInt(a.substring(3,5),16);a=parseInt(a.substring(5,7),16);return new rock.graphics.Color(b,c,a)};
rock.graphics.Color.prototype.clone=function(){return new rock.graphics.Color(this.red,this.green,this.blue,this.alpha)};rock.namespace("rock.graphics");rock.graphics.Font=function(a,b){this.family=a;this.size=b};rock.graphics.Font.prototype.toCanvasFormat=function(){return this.size+"px "+this.family};rock.graphics.Font.prototype.getFamily=function(){return this.family};rock.graphics.Font.prototype.setFamily=function(a){this.type=a};rock.graphics.Font.prototype.getSize=function(){return this.size};rock.graphics.Font.prototype.setSize=function(a){this.size=a};
rock.graphics.Font.prototype.clone=function(){return new rock.graphics.Font(this.family,this.size)};rock.namespace("rock.graphics");rock.graphics.Image=function(a){this.HTMLImage=a;this.premultipliedAlpha=!1};rock.graphics.Image.prototype.getHTMLImage=function(){return this.HTMLImage};rock.graphics.Image.prototype.getWidth=function(){return this.HTMLImage.width};rock.graphics.Image.prototype.getHeight=function(){return this.HTMLImage.height};rock.graphics.Image.prototype.getPremultipliedAlpha=function(){return this.premultipliedAlpha};
rock.graphics.Image.prototype.setPremultipliedAlpha=function(a){this.premultipliedAlpha=a};rock.namespace("rock.graphics.engine");rock.graphics.engine.IDrawable=function(){};rock.interface_(rock.graphics.engine.IDrawable);rock.graphics.engine.IDrawable.prototype.draw=rock.abstract_;rock.namespace("rock.graphics.engine");rock.graphics.engine.IGraphicsEngine=function(){};rock.interface_(rock.graphics.engine.IGraphicsEngine);rock.graphics.engine.IGraphicsEngine.prototype.init=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.clear=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.drawPoint=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.drawLine=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.drawRectangle=rock.abstract_;
rock.graphics.engine.IGraphicsEngine.prototype.drawRoundedRectangle=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.drawImage=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.drawSubImage=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.drawText=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.measureTextWidth=rock.abstract_;rock.graphics.engine.IGraphicsEngine.prototype.measureTextHeight=rock.abstract_;rock.namespace("rock.graphics.engine");rock.graphics.engine.Context=function(a,b){this.application=a;this.HTMLContext=b};rock.graphics.engine.Context.prototype.getWidth=rock.abstract_;rock.graphics.engine.Context.prototype.getHeight=rock.abstract_;rock.graphics.engine.Context.prototype.getApplication=function(){return this.application};rock.graphics.engine.Context.prototype.getHTMLContext=function(){return this.HTMLContext};rock.namespace("rock.graphics.engine.canvas2d");rock.graphics.engine.canvas2d.Canvas2DContext=function(a,b){rock.super_(this,arguments)};rock.extends_(rock.graphics.engine.canvas2d.Canvas2DContext,rock.graphics.engine.Context);rock.graphics.engine.canvas2d.Canvas2DContext.prototype.getWidth=function(){return this.HTMLContext.canvas.width};rock.graphics.engine.canvas2d.Canvas2DContext.prototype.getHeight=function(){return this.HTMLContext.canvas.height};rock.namespace("rock.graphics.engine.webgl");rock.graphics.engine.webgl.WebGLContext=function(a,b){rock.super_(this,arguments)};rock.extends_(rock.graphics.engine.webgl.WebGLContext,rock.graphics.engine.Context);rock.graphics.engine.webgl.WebGLContext.prototype.getWidth=function(){return this.HTMLContext.drawingBufferWidth};rock.graphics.engine.webgl.WebGLContext.prototype.getHeight=function(){return this.HTMLContext.drawingBufferHeight};rock.namespace("rock.graphics.engine");rock.graphics.engine.ContextGraphicsEngine=function(a){rock.super_(this,[]);this.context=a;this.height=this.width=null;this.computeSize()};rock.extends_(rock.graphics.engine.ContextGraphicsEngine,rock.event.EventDispatcher);rock.implements_(rock.graphics.engine.ContextGraphicsEngine,rock.graphics.engine.IGraphicsEngine);rock.graphics.engine.ContextGraphicsEngine.prototype.init=function(){};
rock.graphics.engine.ContextGraphicsEngine.prototype.adjustPixelPosition=function(a,b){var c=a;0!=b%2&&(c+=0.5);return c};rock.graphics.engine.ContextGraphicsEngine.prototype.computeSize=function(){var a=this.context;this.width=a.getWidth();this.height=a.getHeight()};rock.graphics.engine.ContextGraphicsEngine.prototype.getContext=function(){return this.context};rock.namespace("rock.graphics.engine.renderer");rock.graphics.engine.renderer.Renderable=function(){};rock.namespace("rock.graphics.engine.renderer");rock.graphics.engine.renderer.IRenderer=function(){};rock.interface_(rock.graphics.engine.renderer.IRenderer);rock.graphics.engine.renderer.IRenderer.prototype.render=rock.abstract_;rock.namespace("rock.graphics.engine.canvas2d");rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine=function(a){rock.super_(this,arguments)};rock.extends_(rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine,rock.graphics.engine.ContextGraphicsEngine);rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.clear=function(a){var b=this.context.getHTMLContext();b.beginPath();b.clearRect(0,0,this.width,this.height);this.drawRectangle(0,0,this.width,this.height,a)};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawPoint=function(a,b,c,d){var e=this.context.getHTMLContext();e.fillStyle=d.getAsRGBA();e.beginPath();e.arc(a,b,c/2,0,2*Math.PI,!0);e.fill()};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawLine=function(a,b,c,d,e,f){var g=this.context.getHTMLContext();a=this.adjustPixelPosition(a,e);b=this.adjustPixelPosition(b,e);c=this.adjustPixelPosition(c,e);d=this.adjustPixelPosition(d,e);g.strokeStyle=f.getAsRGBA();g.lineWidth=e;g.beginPath();g.moveTo(a,b);g.lineTo(c,d);g.stroke()};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawRectangle=function(a,b,c,d,e,f){rock.util.JsUtils.isNullOrUndefined(f)||1>f?this.drawFilledRectangle(a,b,c,d,e):this.drawStrokeRectangle(a,b,c,d,e,f)};rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawFilledRectangle=function(a,b,c,d,e){var f=this.context.getHTMLContext();f.fillStyle=e.getAsRGBA();f.beginPath();f.fillRect(a,b,c,d)};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawStrokeRectangle=function(a,b,c,d,e,f){var g=this.context.getHTMLContext();a=this.adjustPixelPosition(a,f);b=this.adjustPixelPosition(b,f);g.strokeStyle=e.getAsRGBA();g.lineWidth=f;g.beginPath();g.rect(a,b,c,d);g.stroke()};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawRoundedRectangle=function(a,b,c,d,e,f){var g=this.context.getHTMLContext();c=a+c;d=b+d;g.fillStyle=f.getAsRGBA();g.beginPath();g.arc(a+e,b+e,e,Math.PI,1.5*Math.PI,!1);g.lineTo(c-e,b);g.arc(c-e,b+e,e,1.5*Math.PI,2*Math.PI,!1);g.lineTo(c,d-e);g.arc(c-e,d-e,e,0,0.5*Math.PI,!1);g.lineTo(a+e,d);g.arc(a+e,d-e,e,0.5*Math.PI,Math.PI,!1);g.fill()};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawImage=function(a,b,c,d,e){var f=this.context.getHTMLContext();f.beginPath();rock.util.JsUtils.isNullOrUndefined(d)||rock.util.JsUtils.isNullOrUndefined(e)?f.drawImage(a.getHTMLImage(),b,c):f.drawImage(a.getHTMLImage(),0,0,a.getWidth(),a.getHeight(),b,c,d,e)};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawSubImage=function(a,b,c,d,e,f,g){var h=this.context.getHTMLContext();h.beginPath();h.drawImage(a.getHTMLImage(),d,e,f,g,b,c,f,g)};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.drawText=function(a,b,c,d,e,f,g){var h=this.context.getHTMLContext();h.save();!rock.util.JsUtils.isNullOrUndefined(f)&&!rock.util.JsUtils.isNullOrUndefined(g)&&(h.strokeStyle="rgba(255, 255, 255, 0)",h.beginPath(),h.rect(b,c,f,g),h.stroke(),h.clip());h.font=d.toCanvasFormat();h.fillStyle=e.getAsRGBA();h.beginPath();h.fillText(a,b,c+d.getSize());h.restore()};
rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.measureTextWidth=function(a,b){return rock.util.TextUtils.measureTextWidth(a,b)};rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine.prototype.measureTextHeight=function(a,b){return rock.util.TextUtils.measureTextHeight(a,b)};rock.namespace("rock.graphics.engine.renderer.webgl.program");rock.graphics.engine.renderer.webgl.program.Shader=function(a,b,c){this.glContext=a;this.src=b;this.type=c;this.compiled=!1;this.glShader=null};rock.graphics.engine.renderer.webgl.program.Shader.VERTEX_SHADER="VERTEX_SHADER";rock.graphics.engine.renderer.webgl.program.Shader.FRAGMENT_SHADER="FRAGMENT_SHADER";
rock.graphics.engine.renderer.webgl.program.Shader.prototype.compile=function(){var a=this.glContext.getHTMLContext(),b=a.VERTEX_SHADER;this.type===rock.graphics.engine.renderer.webgl.program.Shader.FRAGMENT_SHADER&&(b=a.FRAGMENT_SHADER);this.glShader=rock.util.WebGlUtils.createAndCompileShader(a,b,this.src);this.compiled=!0};rock.graphics.engine.renderer.webgl.program.Shader.prototype.getSrc=function(){return this.src};rock.graphics.engine.renderer.webgl.program.Shader.prototype.getType=function(){return this.type};
rock.graphics.engine.renderer.webgl.program.Shader.prototype.isCompiled=function(){return this.compiled};rock.graphics.engine.renderer.webgl.program.Shader.prototype.getGlShader=function(){return this.glShader};rock.namespace("rock.graphics.engine.renderer.webgl.program");rock.graphics.engine.renderer.webgl.program.Program=function(a,b,c){this.glContext=a;this.fragmentShader=this.vertexShader=null;this.linked=!1;this.glProgram=null;this.createProgram(b,c);a.getApplication().addEventListener(rock.constants.ROCK_EVENT_CONTEXT_RESTORED,rock.createEventHandler(this,this.onContextRestored))};rock.graphics.engine.renderer.webgl.program.Program.prototype.useProgram=function(){this.glContext.getHTMLContext().useProgram(this.getGlProgram())};
rock.graphics.engine.renderer.webgl.program.Program.prototype.createProgram=function(a,b){this.fragmentShader=this.vertexShader=null;this.linked=!1;this.glProgram=null;this.createShaders(a,b);this.createProgramAndLink()};
rock.graphics.engine.renderer.webgl.program.Program.prototype.createShaders=function(a,b){var c=this.glContext;this.vertexShader=new rock.graphics.engine.renderer.webgl.program.Shader(c,a,rock.graphics.engine.renderer.webgl.program.Shader.VERTEX_SHADER);this.fragmentShader=new rock.graphics.engine.renderer.webgl.program.Shader(c,b,rock.graphics.engine.renderer.webgl.program.Shader.FRAGMENT_SHADER)};
rock.graphics.engine.renderer.webgl.program.Program.prototype.createProgramAndLink=function(){var a=this.glContext.getHTMLContext(),b=this.vertexShader,c=this.fragmentShader;b.isCompiled()||b.compile();c.isCompiled()||c.compile();this.glProgram=rock.util.WebGlUtils.createProgram(a,b.getGlShader(),c.getGlShader());this.linked=!0};rock.graphics.engine.renderer.webgl.program.Program.prototype.onContextRestored=function(){this.restore()};
rock.graphics.engine.renderer.webgl.program.Program.prototype.restore=function(){var a=this.vertexShader,b=this.fragmentShader;null==a||null==b||this.createProgram(a.getSrc(),b.getSrc())};rock.graphics.engine.renderer.webgl.program.Program.prototype.getVertexShader=function(){return this.vertexShader};rock.graphics.engine.renderer.webgl.program.Program.prototype.getFragmentShader=function(){return this.fragmentShader};rock.graphics.engine.renderer.webgl.program.Program.prototype.getLinked=function(){return this.linked};
rock.graphics.engine.renderer.webgl.program.Program.prototype.getGlProgram=function(){return this.glProgram};rock.namespace("rock.graphics.engine.renderer.webgl.program");rock.graphics.engine.renderer.webgl.program.CacheProgram=function(a,b,c,d,e,f,g,h){rock.super_(this,[a,b,c]);this.indexes=this.textures=this.uniforms=this.attributes=null;a=g;rock.util.JsUtils.isNullOrUndefined(a)&&(a=!0);rock.util.JsUtils.isNullOrUndefined(h)&&(h=!0);this.cache(d,e,f,a,h);this.createBuffers=a;this.createTextures=h};rock.extends_(rock.graphics.engine.renderer.webgl.program.CacheProgram,rock.graphics.engine.renderer.webgl.program.Program);
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.cache=function(a,b,c,d,e){this.cacheAttributes(a,d);this.cacheUniforms(b);this.cacheTextures(c,e);this.initIndexes(d)};rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.cacheAttributes=function(a,b){var c=this.glContext.getHTMLContext(),d=this.glProgram,e=null,f,g,h;this.attributes=[];for(f=0;f<a.length;f++)g=a[f],h=c.getAttribLocation(d,g),b&&(e=c.createBuffer()),this.attributes.push({name:g,location:h,buffer:e})};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.cacheUniforms=function(a){var b=this.glContext.getHTMLContext(),c=this.glProgram,d,e,f;this.uniforms=[];for(d=0;d<a.length;d++)e=a[d],f=b.getUniformLocation(c,e),this.uniforms.push({name:e,location:f})};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.cacheTextures=function(a,b){var c=this.glContext.getHTMLContext(),d=this.glProgram,e=null,f,g,h;this.textures=[];for(f=0;f<a.length;f++)g=a[f],h=c.getUniformLocation(d,g),b&&(e=c.createTexture()),this.textures.push({name:g,location:h,texture:e,textureUnit:f})};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.initIndexes=function(a){var b=this.glContext.getHTMLContext(),c={},d=null;a&&(d=b.createBuffer());c.buffer=d;this.indexes=c};rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.enableAttributes=function(){var a=this.glContext.getHTMLContext(),b=this.attributes,c,d;for(c=0;c<b.length;c++)d=b[c],a.enableVertexAttribArray(d.location)};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.disableAttributes=function(){var a=this.glContext.getHTMLContext(),b=this.attributes,c,d;for(c=0;c<b.length;c++)d=b[c],a.disableVertexAttribArray(d.location)};rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.getByName=function(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.name==a)return d;return null};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.getUniformLocation=function(a){return this.getByName(a,this.uniforms).location};rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.populateAttribute=function(a,b,c){var d=this.glContext.getHTMLContext();a=this.getByName(a,this.attributes);d.bindBuffer(d.ARRAY_BUFFER,a.buffer);d.bufferData(d.ARRAY_BUFFER,b,d.STATIC_DRAW);d.vertexAttribPointer(a.location,c,d.FLOAT,d.FALSE,0,0)};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.populateIndexes=function(a){var b=this.glContext.getHTMLContext();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexes.buffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a,b.STATIC_DRAW)};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.populateTexture=function(a,b){var c=this.glContext.getHTMLContext(),d=this.getByName(a,this.textures);c.activeTexture(c.TEXTURE0+d.textureUnit);c.bindTexture(c.TEXTURE_2D,d.texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,
0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,b.getHTMLImage());c.uniform1i(d.location,d.textureUnit)};rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.bufferAttribute=function(a,b,c){var d=this.glContext.getHTMLContext();a=this.getByName(a,this.attributes);d.bindBuffer(d.ARRAY_BUFFER,b);d.vertexAttribPointer(a.location,c,d.FLOAT,d.FALSE,0,0)};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.bufferIndexes=function(a){var b=this.glContext.getHTMLContext();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a)};rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.updateTexture=function(a,b){var c=this.glContext.getHTMLContext(),d=this.getByName(a,this.textures);c.activeTexture(c.TEXTURE0+d.textureUnit);c.bindTexture(c.TEXTURE_2D,b);c.uniform1i(d.location,d.textureUnit)};
rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.getAsNameArray=function(a){var b=[],c,d;for(c=0;c<a.length;c++)d=a[c],b.push(d.name);return b};rock.graphics.engine.renderer.webgl.program.CacheProgram.prototype.restore=function(){rock.super_method(this,rock.graphics.engine.renderer.webgl.program.CacheProgram,"restore");var a=this.getAsNameArray(this.attributes),b=this.getAsNameArray(this.uniforms),c=this.getAsNameArray(this.textures);this.cache(a,b,c,this.createBuffers,this.createTextures)};rock.namespace("rock.graphics.engine.renderer.webgl");rock.graphics.engine.renderer.webgl.Renderer=function(a,b,c,d,e,f){this.glContext=a;this.program=new rock.graphics.engine.renderer.webgl.program.CacheProgram(a,b,c,d,e,f)};rock.implements_(rock.graphics.engine.renderer.webgl.Renderer,rock.graphics.engine.renderer.IRenderer);rock.namespace("rock.graphics.engine.renderer.webgl");rock.graphics.engine.renderer.webgl.GenericRenderable=function(){this.vertices=this.count=null};rock.extends_(rock.graphics.engine.renderer.webgl.GenericRenderable,rock.graphics.engine.renderer.Renderable);rock.graphics.engine.renderer.webgl.GenericRenderable.prototype.getCount=function(){return this.count};rock.graphics.engine.renderer.webgl.GenericRenderable.prototype.setCount=function(a){this.count=a};
rock.graphics.engine.renderer.webgl.GenericRenderable.prototype.getVertices=function(){return this.vertices};rock.graphics.engine.renderer.webgl.GenericRenderable.prototype.setVertices=function(a){this.vertices=a};rock.namespace("rock.graphics.engine.renderer.webgl");rock.graphics.engine.renderer.webgl.GenericRenderer=function(a,b,c,d,e,f){rock.super_(this,arguments);this.glDrawMode=a.getHTMLContext().TRIANGLES};rock.extends_(rock.graphics.engine.renderer.webgl.GenericRenderer,rock.graphics.engine.renderer.webgl.Renderer);
rock.graphics.engine.renderer.webgl.GenericRenderer.prototype.render=function(a){var b=this.program;b.useProgram();var c=this.glContext.getHTMLContext();b.enableAttributes();this.populateAttributes(a);this.populateTextures(a);this.setUniforms(a);c.drawArrays(this.glDrawMode,0,a.getCount());c.bindBuffer(c.ARRAY_BUFFER,null);c.bindTexture(c.TEXTURE_2D,null);b.disableAttributes()};rock.graphics.engine.renderer.webgl.GenericRenderer.prototype.populateAttributes=rock.abstract_;
rock.graphics.engine.renderer.webgl.GenericRenderer.prototype.populateTextures=rock.abstract_;rock.graphics.engine.renderer.webgl.GenericRenderer.prototype.setUniforms=rock.abstract_;rock.namespace("rock.graphics.engine.renderer");rock.graphics.engine.renderer.ScreenElementRenderable=function(){rock.super_(this);this.height=this.width=null};rock.extends_(rock.graphics.engine.renderer.ScreenElementRenderable,rock.graphics.engine.renderer.webgl.GenericRenderable);rock.graphics.engine.renderer.ScreenElementRenderable.prototype.getWidth=function(){return this.width};rock.graphics.engine.renderer.ScreenElementRenderable.prototype.setWidth=function(a){this.width=a};
rock.graphics.engine.renderer.ScreenElementRenderable.prototype.getHeight=function(){return this.height};rock.graphics.engine.renderer.ScreenElementRenderable.prototype.setHeight=function(a){this.height=a};rock.namespace("rock.graphics.engine.renderer");rock.graphics.engine.renderer.PolygonRenderable=function(){rock.super_(this);this.color=null};rock.extends_(rock.graphics.engine.renderer.PolygonRenderable,rock.graphics.engine.renderer.ScreenElementRenderable);rock.graphics.engine.renderer.PolygonRenderable.prototype.getColor=function(){return this.color};rock.graphics.engine.renderer.PolygonRenderable.prototype.setColor=function(a){this.color=a};rock.namespace("rock.graphics.engine.renderer");rock.graphics.engine.renderer.ImageRenderable=function(){rock.super_(this);this.textureCoordinates=this.image=null};rock.extends_(rock.graphics.engine.renderer.ImageRenderable,rock.graphics.engine.renderer.ScreenElementRenderable);rock.graphics.engine.renderer.ImageRenderable.prototype.getImage=function(){return this.image};rock.graphics.engine.renderer.ImageRenderable.prototype.setImage=function(a){this.image=a};
rock.graphics.engine.renderer.ImageRenderable.prototype.getTextureCoordinates=function(){return this.textureCoordinates};rock.graphics.engine.renderer.ImageRenderable.prototype.setTextureCoordinates=function(a){this.textureCoordinates=a};rock.namespace("rock.graphics.engine.renderer.webgl");rock.graphics.engine.renderer.webgl.PolygonRenderer=function(a){this.ATTRIBUTE_VERTICES="a_vertices";this.UNIFORM_RESOLUTION="u_resolution";this.UNIFORM_COLOR="u_color";rock.super_(this,[a,rock.graphics.engine.renderer.webgl.PolygonRenderer.vertexShaderSrc,rock.graphics.engine.renderer.webgl.PolygonRenderer.fragmentShaderSrc,[this.ATTRIBUTE_VERTICES],[this.UNIFORM_RESOLUTION,this.UNIFORM_COLOR],[]])};
rock.extends_(rock.graphics.engine.renderer.webgl.PolygonRenderer,rock.graphics.engine.renderer.webgl.GenericRenderer);rock.graphics.engine.renderer.webgl.PolygonRenderer.prototype.populateAttributes=function(a){this.program.populateAttribute(this.ATTRIBUTE_VERTICES,a.getVertices(),2)};rock.graphics.engine.renderer.webgl.PolygonRenderer.prototype.populateTextures=function(){};
rock.graphics.engine.renderer.webgl.PolygonRenderer.prototype.setUniforms=function(a){var b=this.glContext.getHTMLContext(),c=this.program,d=a.getColor();b.uniform2f(c.getUniformLocation(this.UNIFORM_RESOLUTION),a.getWidth(),a.getHeight());b.uniform4f(c.getUniformLocation(this.UNIFORM_COLOR),d.getNormalizedRed(),d.getNormalizedGreen(),d.getNormalizedBlue(),d.getNormalizedAlpha())};rock.graphics.engine.renderer.webgl.PolygonRenderer.vertexShaderSrc=" attribute vec2 a_vertices;                                           \n uniform vec2 u_resolution;                                           \n void main() {                                                        \n     vec2 zeroToOne = a_vertices / u_resolution;                      \n     vec2 zeroToTwo = zeroToOne * 2.0;                                \n     vec2 clipSpace = zeroToTwo - 1.0;                                \n     gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);               \n }                                                                    \n";
rock.graphics.engine.renderer.webgl.PolygonRenderer.fragmentShaderSrc=" precision mediump float;                                             \n uniform vec4 u_color;                                                \n void main() {                                                        \n     gl_FragColor = u_color;                                          \n }                                                                    \n";rock.namespace("rock.graphics.engine.renderer.webgl");rock.graphics.engine.renderer.webgl.ImageRenderer=function(a){this.ATTRIBUTE_VERTICES="a_vertices";this.ATTRIBUTE_TEXCOORD="a_texCoord";this.UNIFORM_RESOLUTION="u_resolution";this.UNIFORM_IMAGE="u_image";rock.super_(this,[a,rock.graphics.engine.renderer.webgl.ImageRenderer.vertexShaderSrc,rock.graphics.engine.renderer.webgl.ImageRenderer.fragmentShaderSrc,[this.ATTRIBUTE_VERTICES,this.ATTRIBUTE_TEXCOORD],[this.UNIFORM_RESOLUTION],[this.UNIFORM_IMAGE]])};
rock.extends_(rock.graphics.engine.renderer.webgl.ImageRenderer,rock.graphics.engine.renderer.webgl.GenericRenderer);rock.graphics.engine.renderer.webgl.ImageRenderer.prototype.populateAttributes=function(a){var b=this.program;b.populateAttribute(this.ATTRIBUTE_VERTICES,a.getVertices(),2);b.populateAttribute(this.ATTRIBUTE_TEXCOORD,a.getTextureCoordinates(),2)};
rock.graphics.engine.renderer.webgl.ImageRenderer.prototype.populateTextures=function(a){this.program.populateTexture(this.UNIFORM_IMAGE,a.getImage())};rock.graphics.engine.renderer.webgl.ImageRenderer.prototype.setUniforms=function(a){this.glContext.getHTMLContext().uniform2f(this.program.getUniformLocation(this.UNIFORM_RESOLUTION),a.getWidth(),a.getHeight())};rock.graphics.engine.renderer.webgl.ImageRenderer.vertexShaderSrc=" attribute vec2 a_vertices;                                           \n attribute vec2 a_texCoord;                                           \n uniform vec2 u_resolution;                                           \n varying vec2 v_texCoord;                                             \n void main() {                                                        \n     vec2 zeroToOne = a_vertices / u_resolution;                      \n     vec2 zeroToTwo = zeroToOne * 2.0;                                \n     vec2 clipSpace = zeroToTwo - 1.0;                                \n     gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);               \n     v_texCoord = a_texCoord;                                         \n }                                                                    \n";
rock.graphics.engine.renderer.webgl.ImageRenderer.fragmentShaderSrc=" precision mediump float;                                             \n uniform sampler2D u_image;                                           \n varying vec2 v_texCoord;                                             \n void main() {                                                        \n     gl_FragColor = texture2D(u_image, v_texCoord);                   \n }                                                                    \n";rock.namespace("rock.graphics.engine.webgl");
rock.graphics.engine.webgl.WebGLGraphicsEngine=function(a){rock.super_(this,arguments);this.state={saved:!1};this.CIRCUMFERENCE_POINTS=50;this.imageRenderer=this.polygonRenderer=null;this.floatArrayRectangle=new Float32Array(12);this.floatArrayTextureCoordiantes=new Float32Array(12);this.floatArrayCircumference=new Float32Array(6*this.CIRCUMFERENCE_POINTS);this.circumferencePerimeter=new Float32Array(2*this.CIRCUMFERENCE_POINTS);this.polygonRenderable=new rock.graphics.engine.renderer.PolygonRenderable;
this.imageRenderable=new rock.graphics.engine.renderer.ImageRenderable;this.init();this.computePerimeterPoints();var b=rock.util.DOMUtils.createCanvas(1,1).getContext(rock.constants.CANVAS_CONTEXT_2D),b=new rock.graphics.engine.canvas2d.Canvas2DContext(this,b);this.canvasGraphicsEngine=new rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine(b);this.transparent=rock.graphics.Color.TRANSPARENT};rock.extends_(rock.graphics.engine.webgl.WebGLGraphicsEngine,rock.graphics.engine.ContextGraphicsEngine);
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.init=function(){var a=this.context;this.polygonRenderer=new rock.graphics.engine.renderer.webgl.PolygonRenderer(a);this.imageRenderer=new rock.graphics.engine.renderer.webgl.ImageRenderer(a)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.prepareWebGLEngine=function(a){var b=this.context.getHTMLContext();b.enable(b.CULL_FACE);b.frontFace(b.CCW);b.cullFace(b.BACK);b.colorMask(!0,!0,!0,!0);b.disable(b.DEPTH_TEST);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);a?b.blendFuncSeparate(b.ONE,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE):b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.saveState=function(){var a=this.context.getHTMLContext(),b=this.state;b.colorMask=a.getParameter(a.COLOR_WRITEMASK);b.cullFaceEnabled=a.getParameter(a.CULL_FACE);b.frontFace=a.getParameter(a.FRONT_FACE);b.cullFace=a.getParameter(a.CULL_FACE_MODE);b.depthTestEnabled=a.getParameter(a.DEPTH_TEST);b.blendEnabled=a.getParameter(a.BLEND);b.blendEquationRGB=a.getParameter(a.BLEND_EQUATION_RGB);b.blendEquationAlpha=a.getParameter(a.BLEND_EQUATION_ALPHA);
b.blendFuncSrcRGB=a.getParameter(a.BLEND_SRC_RGB);b.blendFuncSrcAlpha=a.getParameter(a.BLEND_SRC_ALPHA);b.blendFuncDstRGB=a.getParameter(a.BLEND_DST_RGB);b.blendFuncDstAlpha=a.getParameter(a.BLEND_DST_ALPHA);b.saved=!0};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.restoreState=function(){var a=this.state;if(a.saved){var b=this.context.getHTMLContext(),c=a.colorMask;b.colorMask(c[0],c[1],c[2],c[3]);a.cullFaceEnabled?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE);b.frontFace(a.frontFace);b.cullFace(a.cullFace);a.depthTestEnabled?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);a.blendEnabled?b.enable(b.BLEND):b.disable(b.BLEND);b.blendEquationSeparate(a.blendEquationRGB,a.blendEquationAlpha);b.blendFuncSeparate(a.blendFuncSrcRGB,
a.blendFuncDstRGB,a.blendFuncSrcAlpha,a.blendFuncDstAlpha)}};rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.clear=function(a){var b=this.context.getHTMLContext();b.clearColor(a.getNormalizedRed(),a.getNormalizedGreen(),a.getNormalizedBlue(),a.getNormalizedAlpha());b.clear(b.COLOR_BUFFER_BIT)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.computePerimeterPoints=function(){var a=this.circumferencePerimeter,b,c,d=this.CIRCUMFERENCE_POINTS,e=2*Math.PI/d;for(b=0;b<d;b++)c=b*e,a[2*b]=Math.cos(c),a[2*b+1]=Math.sin(c)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.computeCircumferenceVertices=function(a,b,c){c/=2;var d=this.circumferencePerimeter,e=this.CIRCUMFERENCE_POINTS,f=this.floatArrayCircumference,g,h=0,j,k,l,m;for(g=0;g<e-1;g++)h=2*g,j=d[h],k=d[h+1],l=d[h+2],m=d[h+3],h=6*g,f[h]=a,f[h+1]=b,f[h+2]=a+l*c,f[h+3]=b+m*c,f[h+4]=a+j*c,f[h+5]=b+k*c;h=6*(e-1);f[h]=a;f[h+1]=b;f[h+2]=a+d[0]*c;f[h+3]=b+d[1]*c;f[h+4]=a+d[2*e-2]*c;f[h+5]=b+d[2*e-1]*c};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawPoint=function(a,b,c,d){this.computeCircumferenceVertices(a,b,c);this.renderPolygon(this.floatArrayCircumference,3*this.CIRCUMFERENCE_POINTS,d)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawLine=function(a,b,c,d,e,f){var g=e/2,h=Math.atan2(d-b,c-a),j=Math.PI/2,k=this.floatArrayRectangle;k[0]=a+g*Math.cos(h-j);k[1]=b+g*Math.sin(h-j);k[2]=a+g*Math.cos(h+j);k[3]=b+g*Math.sin(h+j);k[4]=c+g*Math.cos(h+j);k[5]=d+g*Math.sin(h+j);k[6]=a+g*Math.cos(h-j);k[7]=b+g*Math.sin(h-j);k[8]=c+g*Math.cos(h+j);k[9]=d+g*Math.sin(h+j);k[10]=c+g*Math.cos(h-j);k[11]=d+g*Math.sin(h-j);this.adjustVertices(k,e);this.renderPolygon(k,6,f)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.adjustVertices=function(a,b){var c,d;for(c=0;c<a.length;c++)d=a[c],a[c]=this.adjustPixelPosition(d,b)};rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawRectangle=function(a,b,c,d,e,f){rock.util.JsUtils.isNullOrUndefined(f)||1>f?this.drawFilledRectangle(a,b,c,d,e):this.drawStrokeRectangle(a,b,c,d,e,f)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawFilledRectangle=function(a,b,c,d,e){var f=this.floatArrayRectangle;f[0]=a;f[1]=b;f[2]=a;f[3]=b+d;f[4]=a+c;f[5]=b+d;f[6]=a;f[7]=b;f[8]=a+c;f[9]=b+d;f[10]=a+c;f[11]=b;this.renderPolygon(f,6,e)};rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawStrokeRectangle=function(a,b,c,d,e,f){var g=f/2;c=a+c;d=b+d;this.drawLine(a-g,b,c+g,b,f,e);this.drawLine(a,b,a,d,f,e);this.drawLine(a-g,d,c+g,d,f,e);this.drawLine(c,b,c,d,f,e)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawRoundedRectangle=function(a,b,c,d,e,f){var g=2*e;this.computeCircumferenceVertices(a+e,b+e,g);this.renderPolygon(this.floatArrayCircumference,3*this.CIRCUMFERENCE_POINTS,f);this.computeCircumferenceVertices(a+c-e,b+e,g);this.renderPolygon(this.floatArrayCircumference,3*this.CIRCUMFERENCE_POINTS,f);this.computeCircumferenceVertices(a+e,b+d-e,g);this.renderPolygon(this.floatArrayCircumference,3*this.CIRCUMFERENCE_POINTS,f);this.computeCircumferenceVertices(a+
c-e,b+d-e,g);this.renderPolygon(this.floatArrayCircumference,3*this.CIRCUMFERENCE_POINTS,f);this.drawFilledRectangle(a,b+e,c,d-g,f);this.drawFilledRectangle(a+e,b,c-g,d,f)};rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.renderPolygon=function(a,b,c){this.prepareWebGLEngine();var d=this.polygonRenderer,e=this.polygonRenderable;e.setVertices(a);e.setCount(b);e.setWidth(this.width);e.setHeight(this.height);e.setColor(c);d.render(e)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawImage=function(a,b,c,d,e){var f;d=rock.util.JsUtils.isNullOrUndefined(d)?a.getWidth():d;f=rock.util.JsUtils.isNullOrUndefined(e)?a.getHeight():e;e=this.floatArrayRectangle;e[0]=b;e[1]=c;e[2]=b;e[3]=c+f;e[4]=b+d;e[5]=c+f;e[6]=b;e[7]=c;e[8]=b+d;e[9]=c+f;e[10]=b+d;e[11]=c;b=this.floatArrayTextureCoordiantes;b[0]=0;b[1]=0;b[2]=0;b[3]=1;b[4]=1;b[5]=1;b[6]=0;b[7]=0;b[8]=1;b[9]=1;b[10]=1;b[11]=0;this.renderImage(a,e,6,b)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawSubImage=function(a,b,c,d,e,f,g){var h=a.getWidth(),j=a.getHeight(),k=new rock.geometry.Rectangle(b,c,b+h,c+j);f=new rock.geometry.Rectangle(b+d,c+e,b+d+f,c+e+g);f=k.getIntersectionWithRectangle(f);rock.util.JsUtils.isNullOrUndefined(f)||(k=f.getWidth(),g=f.getHeight(),f=d/h,d=(d+k)/h,h=e/j,e=(e+g)/j,j=this.floatArrayRectangle,j[0]=b,j[1]=c,j[2]=b,j[3]=c+g,j[4]=b+k,j[5]=c+g,j[6]=b,j[7]=c,j[8]=b+k,j[9]=c+g,j[10]=b+k,j[11]=c,b=this.floatArrayTextureCoordiantes,
b[0]=f,b[1]=h,b[2]=f,b[3]=e,b[4]=d,b[5]=e,b[6]=f,b[7]=h,b[8]=d,b[9]=e,b[10]=d,b[11]=h,this.renderImage(a,j,6,b))};rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.renderImage=function(a,b,c,d){this.prepareWebGLEngine(a.getPremultipliedAlpha());var e=this.imageRenderer,f=this.imageRenderable;f.setVertices(b);f.setCount(c);f.setWidth(this.width);f.setHeight(this.height);f.setImage(a);f.setTextureCoordinates(d);e.render(f)};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.drawText=function(a,b,c,d,e,f,g){var h=rock.util.TextUtils.measureTextWidth(a,d),j=rock.util.TextUtils.measureTextHeight(a,d);if(!(0==h||0==j)){var k=this.width-b,l=this.height-c;h>k&&(h=k);j>l&&(j=l);k=this.canvasGraphicsEngine;l=k.getContext().getHTMLContext();l.canvas.width=h;l.canvas.height=j;k.computeSize();k.clear(this.transparent);k.drawText(a,0,0,d,e,f,g);a=l.getImageData(0,0,h,j);a=new rock.graphics.Image(a);this.drawImage(a,b,c)}};
rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.measureTextWidth=function(a,b){return this.canvasGraphicsEngine.measureTextWidth(a,b)};rock.graphics.engine.webgl.WebGLGraphicsEngine.prototype.measureTextHeight=function(a,b){return this.canvasGraphicsEngine.measureTextHeight(a,b)};rock.namespace("rock.window");rock.window.Window=function(a){rock.super_(this);this.windowSystem=a;if(rock.isNullOrUndefined(this.windowSystem))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("NO_WINDOW_SYSTEM"));this.application=this.windowSystem.getApplication();this.components=[];this.backgroundColor=this.application.getStyleManager().getColor(rock.window.style.StyleManager.WINDOW_BACKGROUND_COLOR)};rock.extends_(rock.window.Window,rock.event.EventDispatcher);
rock.implements_(rock.window.Window,rock.graphics.engine.IDrawable);rock.window.Window.WINDOW_ACTIVATED_EVENT="WINDOW_ACTIVATED_EVENT";rock.window.Window.WINDOW_DEACTIVATED_EVENT="WINDOW_DEACTIVATED_EVENT";rock.window.Window.prototype.addComponent=function(a){this.components.push(a)};rock.window.Window.prototype.removeComponent=function(a){rock.util.JsUtils.removeByValueFromArray(this.components,a)};rock.window.Window.prototype.updateComponents=function(){};
rock.window.Window.prototype.draw=function(a){a.clear(this.backgroundColor);this.drawUI(a)};rock.window.Window.prototype.drawUI=function(a){var b,c=this.components;for(b=0;b<c.length;b++)c[b].draw(a)};rock.window.Window.prototype.redraw=function(){var a=this.windowSystem;this==a.getCurrentWindow()&&a.draw()};rock.window.Window.prototype.deactivate=function(){var a,b,c=this.components;for(a=0;a<c.length;a++)b=c[a],b.deactivate();this.dispatchEvent(new rock.event.Event(rock.window.Window.WINDOW_DEACTIVATED_EVENT))};
rock.window.Window.prototype.getComponent=function(a){var b=this.components,c,d;for(c=0;c<b.length;c++)if(d=b[c],a===d.getId())return d;return null};rock.window.Window.prototype.getComponents=function(){return this.components};rock.window.Window.prototype.getWindowSystem=function(){return this.windowSystem};rock.window.Window.prototype.getApplication=function(){return this.application};rock.namespace("rock.window");
rock.window.WindowSystem=function(a){this.application=a;this.canvas=a.getCanvas();this.height=this.width=-1;this.graphicsEngine=null;this.registeredWindowsInfo=[];this.currentWindow=null;this.HTMLlisteners={};this.canDraw=!0;a.addEventListener(rock.constants.ROCK_EVENT_CONTEXT_LOST,rock.createEventHandler(this,this.disableDrawing));a.addEventListener(rock.constants.ROCK_EVENT_CONTEXT_RESTORED,rock.createEventHandler(this,this.enableDrawing));a.addEventListener(rock.app.Application.LOCALE_CHANGED_EVENT,rock.createEventHandler(this,
this.handleOnLocaleChanged))};rock.window.WindowSystem.createMouseEvent=function(a,b,c,d){a=new rock.event.MouseEvent(a);a.setX(b);a.setY(c);a.setDOMMouseEvent(d);return a};rock.window.WindowSystem.createKeyEvent=function(a,b){var c=new rock.event.KeyEvent(a);c.setDOMMouseEvent(b);return c};rock.window.WindowSystem.prototype.init=function(){this.addHTMLEventsListeners()};
rock.window.WindowSystem.prototype.addHTMLEventListener=function(a,b){this.removeHTMLEventListener(a);rock.util.DOMUtils.addEventListener(this.canvas,a,b);this.HTMLlisteners[a]=b};rock.window.WindowSystem.prototype.removeHTMLEventListener=function(a){var b=this.HTMLlisteners[a];rock.util.JsUtils.isNullOrUndefined(b)||(rock.util.DOMUtils.removeEventListener(this.canvas,a,b),this.HTMLlisteners[a]=null)};
rock.window.WindowSystem.prototype.addHTMLEventsListeners=function(){this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_MOUSE_DOWN,rock.createEventHandler(this,this.handleMouseDown));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_MOUSE_UP,rock.createEventHandler(this,this.handleMouseUp));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_CLICK,rock.createEventHandler(this,this.handleClick));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_DBLCLICK,rock.createEventHandler(this,
this.handleDblClick));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_MOUSE_MOVE,rock.createEventHandler(this,this.handleMouseMove));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_MOUSE_WHEEL,rock.createEventHandler(this,this.handleMouseWheel));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_MOUSE_WHEEL_FI,rock.createEventHandler(this,this.handleMouseWheel));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_MOUSE_LEAVE,rock.createEventHandler(this,this.handleMouseLeave));
this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_KEY_DOWN,rock.createEventHandler(this,this.handleKeyDown));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_KEY_UP,rock.createEventHandler(this,this.handleKeyUp));this.addHTMLEventListener(rock.constants.HTML_DOM_EVENT_KEY_PRESS,rock.createEventHandler(this,this.handleKeyPress))};rock.window.WindowSystem.prototype.removeHTMLEventsListeners=function(){var a=this.HTMLlisteners,b;for(b in a)a.hasOwnProperty(b)&&this.removeHTMLEventListener(a[b])};
rock.window.WindowSystem.prototype.draw=function(){this.canDraw&&this.currentWindow.draw(this.graphicsEngine)};rock.window.WindowSystem.prototype.disableDrawing=function(){this.canDraw=!1};rock.window.WindowSystem.prototype.enableDrawing=function(){this.canDraw=!0};rock.window.WindowSystem.prototype.handleMouseDown=function(a){this.handleMouseSystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_MOUSE_DOWN,a)};
rock.window.WindowSystem.prototype.handleMouseUp=function(a){this.handleMouseSystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_MOUSE_UP,a)};rock.window.WindowSystem.prototype.handleClick=function(a){this.handleMouseSystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_CLICK,a)};rock.window.WindowSystem.prototype.handleDblClick=function(a){this.handleMouseSystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_DBLCLICK,a)};
rock.window.WindowSystem.prototype.handleMouseMove=function(a){this.handleMouseSystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_MOUSE_MOVE,a)};rock.window.WindowSystem.prototype.handleMouseWheel=function(a){var b=new rock.event.MouseWheelEvent(rock.constants.ROCK_EVENT_MOUSE_WHEEL);b.setDOMMouseEvent(a);this.currentWindow.dispatchEvent(b)};
rock.window.WindowSystem.prototype.handleMouseLeave=function(a){var b=rock.util.MouseUtils.resolveEventCoords(a),c=b.x,b=b.y,d,e,f=this.currentWindow.getComponents();for(d=0;d<f.length;d++)e=f[d],e.handleMouseOutMouseOverEvent(!1,c,b,a);this.currentWindow.dispatchEvent(rock.window.WindowSystem.createMouseEvent(rock.constants.ROCK_EVENT_MOUSE_LEAVE,c,b,a))};rock.window.WindowSystem.prototype.handleKeyDown=function(a){this.handleKeySystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_KEY_DOWN,a)};
rock.window.WindowSystem.prototype.handleKeyUp=function(a){this.handleKeySystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_KEY_UP,a)};rock.window.WindowSystem.prototype.handleKeyPress=function(a){this.handleKeySystemEvent(this.currentWindow,rock.constants.ROCK_EVENT_KEY_PRESS,a)};
rock.window.WindowSystem.prototype.handleMouseSystemEvent=function(a,b,c){var d=rock.util.MouseUtils.resolveEventCoords(c),e=d.x,d=d.y,f,g,h=a.getComponents();for(f=0;f<h.length;f++)g=h[f],g.handleMouseSystemEvent(b,e,d,c);a.dispatchEvent(rock.window.WindowSystem.createMouseEvent(b,e,d,c))};
rock.window.WindowSystem.prototype.handleKeySystemEvent=function(a,b,c){var d,e=a.getComponents(),f;for(f=0;f<e.length;f++)d=e[f],d.handleKeySystemEvent(b,c);a.dispatchEvent(rock.window.WindowSystem.createKeyEvent(b,c))};rock.window.WindowSystem.prototype.handleOnLocaleChanged=function(){this.draw()};rock.window.WindowSystem.prototype.registerWindow=function(a,b){this.unregisterWindow(a);var c=new rock.window.WindowRegisterInfo(a,b);this.registeredWindowsInfo.push(c)};
rock.window.WindowSystem.prototype.unregisterWindow=function(a){rock.util.JsUtils.removeByValueFromArray(this.registeredWindowsInfo,this.getRegisteredWindowInfo(a))};rock.window.WindowSystem.prototype.getWindow=function(a){a=this.getRegisteredWindowInfo(a);return null!=a?a.getWindow():null};rock.window.WindowSystem.prototype.getRegisteredWindowInfo=function(a){var b=this.registeredWindowsInfo,c=null,d;for(d=0;d<b.length;d++)if(c=b[d],c.getId()===a)return c;return null};
rock.window.WindowSystem.prototype.setCurrentWindow=function(a){var b=this.currentWindow;rock.isNullOrUndefined(b)||b.deactivate();this.currentWindow=a;this.currentWindow.dispatchEvent(new rock.event.Event(rock.window.Window.WINDOW_ACTIVATED_EVENT));this.draw()};rock.window.WindowSystem.prototype.getCurrentWindow=function(){return this.currentWindow};rock.window.WindowSystem.prototype.getApplication=function(){return this.application};rock.window.WindowSystem.prototype.getWidth=function(){return this.width};
rock.window.WindowSystem.prototype.setWidth=function(a){this.width=a};rock.window.WindowSystem.prototype.getHeight=function(){return this.height};rock.window.WindowSystem.prototype.setHeight=function(a){this.height=a};rock.window.WindowSystem.prototype.getGraphicsEngine=function(){return this.graphicsEngine};rock.window.WindowSystem.prototype.setGraphicsEngine=function(a){this.graphicsEngine=a};rock.window.WindowSystem.prototype.getAspectRatio=function(){return this.width/this.height};
rock.window.WindowRegisterInfo=function(a,b){this.id=a;this.window=b};rock.window.WindowRegisterInfo.prototype.getId=function(){return this.id};rock.window.WindowRegisterInfo.prototype.getWindow=function(){return this.window};rock.namespace("rock.window.style");rock.window.style.Style=function(a){this.id=a;this.colors={};this.fonts={}};rock.window.style.Style.prototype.getId=function(){return this.id};rock.window.style.Style.prototype.addColor=function(a,b){this.colors[a]=b};rock.window.style.Style.prototype.getColor=function(a){return this.colors[a]};rock.window.style.Style.prototype.addFont=function(a,b){this.fonts[a]=b};rock.window.style.Style.prototype.getFont=function(a){return this.fonts[a]};rock.namespace("rock.window.style");rock.window.style.StyleManager=function(){this.styles=[];this.currentStyle=null;var a=rock.window.style.StyleManager.createRockStyle();this.addStyle(a);this.setCurrentStyle(a.getId())};rock.window.style.StyleManager.WINDOW_BACKGROUND_COLOR="WINDOW_BACKGROUND_COLOR";rock.window.style.StyleManager.COMPONENT_BACKGROUND_COLOR="COMPONENT_BACKGROUND_COLOR";rock.window.style.StyleManager.COMPONENT_COLOR="COMPONENT_COLOR";
rock.window.style.StyleManager.COMPONENT_COLOR_2="COMPONENT_COLOR_2";rock.window.style.StyleManager.COMPONENT_FONT_COLOR="COMPONENT_FONT_COLOR";rock.window.style.StyleManager.COMPONENT_FONT="COMPONENT_FONT";
rock.window.style.StyleManager.createRockStyle=function(){var a=new rock.window.style.Style(rock.constants.ROCK_STYLE_ID);a.addColor(rock.window.style.StyleManager.WINDOW_BACKGROUND_COLOR,new rock.graphics.Color(174,222,255));a.addColor(rock.window.style.StyleManager.COMPONENT_BACKGROUND_COLOR,new rock.graphics.Color(123,201,255));a.addColor(rock.window.style.StyleManager.COMPONENT_COLOR,new rock.graphics.Color(20,30,128));a.addColor(rock.window.style.StyleManager.COMPONENT_COLOR_2,new rock.graphics.Color(123,
175,255));a.addColor(rock.window.style.StyleManager.COMPONENT_FONT_COLOR,new rock.graphics.Color(0,0,0));a.addFont(rock.window.style.StyleManager.COMPONENT_FONT,new rock.graphics.Font(rock.constants.DEFAULT_FONT_TYPE,rock.constants.DEFAULT_FONT_SIZE));return a};rock.window.style.StyleManager.prototype.addStyle=function(a){this.styles.push(a)};rock.window.style.StyleManager.prototype.setCurrentStyle=function(a){var b,c,d=this.styles;for(b=0;b<d.length;b++)c=d[b],c.getId()==a&&(this.currentStyle=c)};
rock.window.style.StyleManager.prototype.getColor=function(a){a=this.currentStyle.getColor(a);return rock.util.JsUtils.isNullOrUndefined(a)?null:a.clone()};rock.window.style.StyleManager.prototype.getFont=function(a){a=this.currentStyle.getFont(a);return rock.util.JsUtils.isNullOrUndefined(a)?null:a.clone()};rock.namespace("rock.window.component");rock.window.component.Component=function(a){rock.super_(this);this.window=a;this.application=a.getApplication();this.id=null;this.computedHeight=this.computedWidth=this.height=this.width=this.y=this.x=NaN;this.backgroundColor=this.application.getStyleManager().getColor(rock.window.style.StyleManager.COMPONENT_BACKGROUND_COLOR);this.mouseOver=!1;this.application.addEventListener(rock.app.Application.LOCALE_CHANGED_EVENT,rock.createEventHandler(this,this.handleOnLocaleChanged))};
rock.extends_(rock.window.component.Component,rock.event.EventDispatcher);rock.implements_(rock.window.component.Component,rock.graphics.engine.IDrawable);rock.window.component.Component.AUTO_SIZE=-1;rock.window.component.Component.prototype.handleOnLocaleChanged=function(){};rock.window.component.Component.prototype.updateComponent=rock.abstract_;rock.window.component.Component.prototype.deactivate=function(){this.mouseOver=!1};
rock.window.component.Component.prototype.hit=function(a,b){var c=this.window.getApplication().getScaleFactor(),d=a/c,c=b/c;return this.x<=d&&d<=this.x+this.computedWidth&&this.y<=c&&c<=this.y+this.computedHeight};rock.window.component.Component.prototype.handleMouseSystemEvent=function(a,b,c,d){var e=this.hit(b,c);e&&this.dispatchEvent(rock.window.WindowSystem.createMouseEvent(a,b,c,d));a===rock.constants.ROCK_EVENT_MOUSE_MOVE&&this.handleMouseOutMouseOverEvent(e,b,c,d)};
rock.window.component.Component.prototype.handleMouseOutMouseOverEvent=function(a,b,c,d){a&&!this.mouseOver?(this.mouseOver=!0,this.dispatchEvent(rock.window.WindowSystem.createMouseEvent(rock.constants.ROCK_EVENT_MOUSE_OVER,b,c,d))):!a&&this.mouseOver&&(this.mouseOver=!1,this.dispatchEvent(rock.window.WindowSystem.createMouseEvent(rock.constants.ROCK_EVENT_MOUSE_LEAVE,b,c,d)))};
rock.window.component.Component.prototype.handleKeySystemEvent=function(a,b){this.dispatchEvent(rock.window.WindowSystem.createKeyEvent(a,b))};rock.window.component.Component.prototype.checkResourceAvailable=function(a){if(rock.util.JsUtils.isNullOrUndefined(a))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("RESOURCE_NOT_AVAILABLE"));};rock.window.component.Component.prototype.redraw=function(){var a=this.window,b=a.getWindowSystem();a==b.getCurrentWindow()&&this.draw(b.getGraphicsEngine())};
rock.window.component.Component.prototype.updateWindow=function(a){this.window=a};rock.window.component.Component.prototype.getId=function(){return this.id};rock.window.component.Component.prototype.setId=function(a){this.id=a};rock.window.component.Component.prototype.getX=function(){return this.x};rock.window.component.Component.prototype.setX=function(a){this.x=a};rock.window.component.Component.prototype.getY=function(){return this.y};
rock.window.component.Component.prototype.setY=function(a){this.y=a};rock.window.component.Component.prototype.getWidth=function(){return this.width};rock.window.component.Component.prototype.setWidth=function(a){if(a<rock.window.component.Component.AUTO_SIZE)throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INVALID_COMPONENT_OPERATION"));this.width=a};rock.window.component.Component.prototype.getHeight=function(){return this.height};
rock.window.component.Component.prototype.setHeight=function(a){if(a<rock.window.component.Component.AUTO_SIZE)throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INVALID_COMPONENT_OPERATION"));this.height=a};rock.window.component.Component.prototype.getComputedWidth=function(){return this.computedWidth};rock.window.component.Component.prototype.getComputedHeight=function(){return this.computedHeight};rock.window.component.Component.prototype.getBackgroundColor=function(){return this.backgroundColor};
rock.window.component.Component.prototype.setBackgroundColor=function(a){this.backgroundColor=a};rock.namespace("rock.window.component");
rock.window.component.TextComponent=function(a,b,c,d,e){rock.super_(this,[a]);this.text=b;rock.util.JsUtils.isNullOrUndefined(this.text)&&(this.text="");this.localize=c;rock.util.JsUtils.isNullOrUndefined(this.localize)&&(this.localize=!1);this.font=d;rock.util.JsUtils.isNullOrUndefined(this.font)&&(this.font=this.application.getStyleManager().getFont(rock.window.style.StyleManager.COMPONENT_FONT));this.color=e;rock.util.JsUtils.isNullOrUndefined(this.color)&&(this.color=this.application.getStyleManager().getColor(rock.window.style.StyleManager.COMPONENT_FONT_COLOR));
this.localizedText=null;this.localizeText()};rock.extends_(rock.window.component.TextComponent,rock.window.component.Component);rock.window.component.TextComponent.prototype.localizeText=function(){var a=this.text;this.localize&&(a=this.application.getResourceManager().getString(this.text));this.localizedText=a};rock.window.component.TextComponent.prototype.getText=function(){return this.text};rock.window.component.TextComponent.prototype.getLocalize=function(){return this.localize};
rock.window.component.TextComponent.prototype.setText=function(a,b){this.text=a;rock.util.JsUtils.isNullOrUndefined(this.text)&&(this.text="");this.localize=b;rock.util.JsUtils.isNullOrUndefined(this.localize)&&(this.localize=!1);this.localizeText()};rock.window.component.TextComponent.prototype.getFont=function(){return this.font};rock.window.component.TextComponent.prototype.setFont=function(a){this.font=a};rock.window.component.TextComponent.prototype.getColor=function(){return this.color};
rock.window.component.TextComponent.prototype.setColor=function(a){this.color=a};rock.window.component.TextComponent.prototype.getLocalizedText=function(){return this.localizedText};rock.namespace("rock.window.component");rock.window.component.Image=function(a,b,c){rock.super_(this,[a]);this.image=b;this.height=this.width=rock.window.component.Component.AUTO_SIZE;this.localize=c;rock.util.JsUtils.isNullOrUndefined(this.localize)&&(this.localize=!1);this.computedImage=null};rock.extends_(rock.window.component.Image,rock.window.component.Component);
rock.window.component.Image.prototype.updateComponent=function(){this.computeImage();var a=this.computedImage;this.computedWidth=this.width===rock.window.component.Component.AUTO_SIZE?a.getWidth():this.width;this.computedHeight=this.height===rock.window.component.Component.AUTO_SIZE?a.getHeight():this.height};
rock.window.component.Image.prototype.computeImage=function(){var a=this.image;this.localize&&(a=this.application.getResourceManager().getImage(this.image),this.checkResourceAvailable(a));this.computedImage=a};rock.window.component.Image.prototype.draw=function(a){this.updateComponent();a.drawImage(this.computedImage,this.x,this.y,this.computedWidth,this.computedHeight)};rock.window.component.Image.prototype.getImage=function(){return this.image};
rock.window.component.Image.prototype.getLocalize=function(){return this.localize};rock.window.component.Image.prototype.getComputedImage=function(){return this.computedImage};rock.namespace("rock.window.component");rock.window.component.Label=function(a,b,c,d,e){rock.super_(this,[a,b,c,d,e]);this.height=this.width=rock.window.component.Component.AUTO_SIZE};rock.extends_(rock.window.component.Label,rock.window.component.TextComponent);
rock.window.component.Label.prototype.updateComponent=function(){this.localizeText();var a=this.localizedText,b=this.font;this.computedWidth=this.width===rock.window.component.Component.AUTO_SIZE?rock.util.TextUtils.measureTextWidth(a,b):this.width;this.computedHeight=this.height===rock.window.component.Component.AUTO_SIZE?rock.util.TextUtils.measureTextHeight(a,b):this.height};
rock.window.component.Label.prototype.draw=function(a){this.updateComponent();a.drawText(this.localizedText,this.x,this.y,this.font,this.color,this.computedWidth,this.computedHeight)};rock.namespace("rock.window.component");
rock.window.component.Button=function(a,b,c,d,e){rock.super_(this,[a,b,c,d,e]);this.height=this.width=rock.window.component.Component.AUTO_SIZE;this.MARGIN_WIDTH=6;this.MARGIN_HEIGHT=3;this.BORDER_WIDTH=1;this.borderColor=this.application.getStyleManager().getColor(rock.window.style.StyleManager.COMPONENT_COLOR);this.onMouseOverColor=this.application.getStyleManager().getColor(rock.window.style.StyleManager.COMPONENT_COLOR_2);this.textPosition=null;this.addEventListener(rock.constants.ROCK_EVENT_MOUSE_OVER,rock.createEventHandler(this,
this.handleOnMouseOver));this.addEventListener(rock.constants.ROCK_EVENT_MOUSE_LEAVE,rock.createEventHandler(this,this.handleOnMouseOut))};rock.extends_(rock.window.component.Button,rock.window.component.TextComponent);rock.window.component.Button.prototype.handleOnMouseOver=function(){this.redraw()};rock.window.component.Button.prototype.handleOnMouseOut=function(){this.redraw()};
rock.window.component.Button.prototype.updateComponent=function(){this.localizeText();var a=this.localizedText,b=this.font,c=rock.util.TextUtils.measureTextWidth(a,b),a=rock.util.TextUtils.measureTextHeight(a,b);this.computedWidth=this.width===rock.window.component.Component.AUTO_SIZE?c+2*this.MARGIN_WIDTH:this.width;this.computedHeight=this.height===rock.window.component.Component.AUTO_SIZE?a+2*this.MARGIN_HEIGHT:this.height;this.textPosition=rock.util.GeometryUtils.getPointMakesSameCenter(new rock.geometry.Point2(this.x,
this.y),this.computedWidth,this.computedHeight,c,a)};rock.window.component.Button.prototype.getBackgroundColorToUse=function(){return this.mouseOver?this.onMouseOverColor:this.backgroundColor};
rock.window.component.Button.prototype.draw=function(a){this.updateComponent();a.drawRectangle(this.x,this.y,this.computedWidth,this.computedHeight,this.getBackgroundColorToUse());a.drawRectangle(this.x,this.y,this.computedWidth,this.computedHeight,this.borderColor,this.BORDER_WIDTH);var b=this.textPosition;a.drawText(this.localizedText,b.getX(),b.getY(),this.font,this.color)};rock.window.component.Button.prototype.getOnMouseOverColor=function(){return this.onMouseOverColor};
rock.window.component.Button.prototype.setOnMouseOverColor=function(a){this.onMouseOverColor=a;this.redraw()};rock.namespace("rock.window.component");rock.window.component.ProgressBarComponent=function(a){rock.super_(this,[a]);this.percentLoaded=0;this.margin=2;this.borderColor=this.application.getStyleManager().getColor(rock.window.style.StyleManager.COMPONENT_COLOR);this.barColor=this.application.getStyleManager().getColor(rock.window.style.StyleManager.COMPONENT_BACKGROUND_COLOR);this.barWidth=this.barHeight=NaN};rock.extends_(rock.window.component.ProgressBarComponent,rock.window.component.Component);
rock.window.component.ProgressBarComponent.DEFAULT_WIDTH=200;rock.window.component.ProgressBarComponent.DEFAULT_HEIGHT=30;
rock.window.component.ProgressBarComponent.prototype.updateComponent=function(){this.computedWidth=this.width===rock.window.component.Component.AUTO_SIZE?rock.window.component.ProgressBarComponent.DEFAULT_WIDTH:this.width;this.computedHeight=this.height===rock.window.component.Component.AUTO_SIZE?rock.window.component.ProgressBarComponent.DEFAULT_HEIGHT:this.height;this.barHeight=this.computedHeight-2*this.margin;this.barWidth=this.percentLoaded*(this.computedWidth-2*this.margin)/100};
rock.window.component.ProgressBarComponent.prototype.draw=function(a){this.updateComponent();a.drawRectangle(this.x,this.y,this.computedWidth,this.computedHeight,this.borderColor);a.drawRectangle(this.x+this.margin,this.y+this.margin,this.barWidth,this.barHeight,this.barColor)};rock.window.component.ProgressBarComponent.prototype.setPercentLoaded=function(a){this.percentLoaded=100<a?100:0>a?0:a};rock.namespace("rock.window.component.html");
rock.window.component.html.HTMLComponent=function(a,b){rock.super_(this,[a]);this.height=this.width=rock.window.component.Component.AUTO_SIZE;this.HTMLElement=rock.util.DOMUtils.createHTMLElement(b);this.style=this.HTMLElement.style;this.style[rock.constants.CSS_DISPLAY]=rock.constants.CSS_DISPLAY_NONE;this.style[rock.constants.CSS_POSITION]=rock.constants.CSS_POSITION_ABSOLUTE;this.application.getCanvas().parentNode.appendChild(this.HTMLElement);rock.util.DOMUtils.addEventListener(this.HTMLElement,rock.constants.HTML_DOM_EVENT_MOUSE_DOWN,
rock.createEventHandler(this,this.dispatchOnMouseEvent,[rock.constants.ROCK_EVENT_MOUSE_DOWN]));rock.util.DOMUtils.addEventListener(this.HTMLElement,rock.constants.HTML_DOM_EVENT_MOUSE_UP,rock.createEventHandler(this,this.dispatchOnMouseEvent,[rock.constants.ROCK_EVENT_MOUSE_UP]));rock.util.DOMUtils.addEventListener(this.HTMLElement,rock.constants.HTML_DOM_EVENT_CLICK,rock.createEventHandler(this,this.dispatchOnMouseEvent,[rock.constants.ROCK_EVENT_CLICK]));rock.util.DOMUtils.addEventListener(this.HTMLElement,
rock.constants.HTML_DOM_EVENT_DBLCLICK,rock.createEventHandler(this,this.dispatchOnMouseEvent,[rock.constants.ROCK_EVENT_DBLCLICK]));rock.util.DOMUtils.addEventListener(this.HTMLElement,rock.constants.HTML_DOM_EVENT_MOUSE_MOVE,rock.createEventHandler(this,this.dispatchOnMouseEvent,[rock.constants.ROCK_EVENT_MOUSE_MOVE]));rock.util.DOMUtils.addEventListener(this.HTMLElement,rock.constants.HTML_DOM_EVENT_MOUSE_OVER,rock.createEventHandler(this,this.dispatchOnMouseEvent,[rock.constants.ROCK_EVENT_MOUSE_OVER]));
rock.util.DOMUtils.addEventListener(this.HTMLElement,rock.constants.HTML_DOM_EVENT_MOUSE_LEAVE,rock.createEventHandler(this,this.dispatchOnMouseEvent,[rock.constants.ROCK_EVENT_MOUSE_LEAVE]))};rock.extends_(rock.window.component.html.HTMLComponent,rock.window.component.Component);
rock.window.component.html.HTMLComponent.prototype.dispatchOnMouseEvent=function(a,b){var c=rock.util.MouseUtils.resolveEventCoords(a);this.dispatchEvent(rock.window.WindowSystem.createMouseEvent(b,c.x,c.y,a));b===rock.constants.ROCK_EVENT_MOUSE_OVER?this.mouseOver=!0:b===rock.constants.ROCK_EVENT_MOUSE_LEAVE&&(this.mouseOver=!1)};rock.window.component.html.HTMLComponent.prototype.deactivate=function(){rock.super_method(this,rock.window.component.html.HTMLComponent,"deactivate",[]);this.display(!1)};
rock.window.component.html.HTMLComponent.prototype.handleMouseSystemEvent=function(){};rock.window.component.html.HTMLComponent.prototype.computeSize=function(){this.computedWidth=this.HTMLElement.offsetWidth;this.computedHeight=this.HTMLElement.offsetHeight};
rock.window.component.html.HTMLComponent.prototype.display=function(a){if(a){this.style[rock.constants.CSS_DISPLAY]=rock.constants.CSS_DISPLAY_BLOCK;var b=this.application.getScaleFactor();a=this.getX()*b;b*=this.getY();this.style[rock.constants.CSS_LEFT]=Math.round(a)+"px";this.style[rock.constants.CSS_TOP]=Math.round(b)+"px"}else this.style[rock.constants.CSS_DISPLAY]=rock.constants.CSS_DISPLAY_NONE};rock.window.component.html.HTMLComponent.prototype.draw=function(){this.display(!0);this.updateComponent()};
rock.window.component.html.HTMLComponent.updateHTMLStyleSize=function(a,b,c,d,e){a[rock.constants.CSS_WIDTH]=rock.util.JsUtils.isNullOrUndefined(b)||0>b?"":Math.round(b*d)+"px";a[rock.constants.CSS_HEIGHT]=rock.util.JsUtils.isNullOrUndefined(c)||0>c?"":Math.round(c*d)+"px";a[rock.constants.CSS_OVERFLOW]=rock.util.JsUtils.isNullOrUndefined(e)?"":rock.constants.CSS_OVERFLOW_HIDDEN};
rock.window.component.html.HTMLComponent.updateHTMLStyleFont=function(a,b,c,d){a[rock.constants.CSS_FONT_FAMILY]=b.getFamily();a[rock.constants.CSS_FONT_SIZE]=Math.round(b.getSize()*d)+"px";a[rock.constants.CSS_COLOR]=c.getAsHex()};rock.window.component.html.HTMLComponent.updateHTMLBackground=function(a,b){a[rock.constants.CSS_BACKGROUND_COLOR]=rock.util.JsUtils.isNullOrUndefined(b)?"":b.getAsHex()};rock.namespace("rock.window.component.html");
rock.window.component.html.HTMLTextComponent=function(a,b,c,d,e,f){rock.super_(this,[a,f]);this.text=b;rock.util.JsUtils.isNullOrUndefined(this.text)&&(this.text="");this.localize=c;rock.util.JsUtils.isNullOrUndefined(this.localize)&&(this.localize=!1);this.font=d;rock.util.JsUtils.isNullOrUndefined(this.font)&&(this.font=this.application.getStyleManager().getFont(rock.window.style.StyleManager.COMPONENT_FONT));this.color=e;rock.util.JsUtils.isNullOrUndefined(this.color)&&(this.color=this.application.getStyleManager().getColor(rock.window.style.StyleManager.COMPONENT_FONT_COLOR));
this.localizedText=null;this.localizeText()};rock.extends_(rock.window.component.html.HTMLTextComponent,rock.window.component.html.HTMLComponent);rock.window.component.html.HTMLTextComponent.prototype.localizeText=function(){var a=this.text;this.localize&&(a=this.application.getResourceManager().getString(this.text));this.localizedText=a};rock.window.component.html.HTMLTextComponent.prototype.getText=function(){return this.text};rock.window.component.html.HTMLTextComponent.prototype.getLocalize=function(){return this.localize};
rock.window.component.html.HTMLTextComponent.prototype.setText=function(a,b){this.text=a;rock.util.JsUtils.isNullOrUndefined(this.text)&&(this.text="");this.localize=b;rock.util.JsUtils.isNullOrUndefined(this.localize)&&(this.localize=!1);this.localizeText()};rock.window.component.html.HTMLTextComponent.prototype.getFont=function(){return this.font};rock.window.component.html.HTMLTextComponent.prototype.setFont=function(a){this.font=a};
rock.window.component.html.HTMLTextComponent.prototype.getColor=function(){return this.color};rock.window.component.html.HTMLTextComponent.prototype.setColor=function(a){this.color=a};rock.window.component.html.HTMLTextComponent.prototype.getLocalizedText=function(){return this.localizedText};rock.namespace("rock.window.component.html");rock.window.component.html.HTMLLabel=function(a,b,c,d,e){rock.super_(this,[a,b,c,d,e,rock.constants.SPAN_TAG]);this.style[rock.constants.CSS_TEXT_ALIGN]=rock.constants.CSS_LEFT};rock.extends_(rock.window.component.html.HTMLLabel,rock.window.component.html.HTMLTextComponent);
rock.window.component.html.HTMLLabel.prototype.updateComponent=function(){var a=this.style,b=this.window.getApplication().getScaleFactor();rock.window.component.html.HTMLComponent.updateHTMLStyleSize(a,this.width,this.height,b,!0);rock.window.component.html.HTMLComponent.updateHTMLStyleFont(a,this.font,this.color,b);this.localizeText();this.HTMLElement.textContent=this.localizedText;this.computeSize()};rock.namespace("rock.window.component.html");rock.window.component.html.HTMLButton=function(a,b,c,d,e){rock.super_(this,[a,b,c,d,e,rock.constants.INPUT_TAG]);this.HTMLElement.type=rock.constants.INPUT_TYPE_BUTTON};rock.extends_(rock.window.component.html.HTMLButton,rock.window.component.html.HTMLTextComponent);
rock.window.component.html.HTMLButton.prototype.updateComponent=function(){var a=this.style,b=this.window.getApplication().getScaleFactor();rock.window.component.html.HTMLComponent.updateHTMLStyleSize(a,this.width,this.height,b);rock.window.component.html.HTMLComponent.updateHTMLStyleFont(a,this.font,this.color,b);rock.window.component.html.HTMLComponent.updateHTMLBackground(a,this.backgroundColor);this.localizeText();this.HTMLElement.value=this.localizedText;this.computeSize()};rock.namespace("rock.geometry");rock.geometry.Point2=function(a,b){this.x=a;this.y=b};rock.geometry.Point2.prototype.getX=function(){return this.x};rock.geometry.Point2.prototype.setX=function(a){this.x=a};rock.geometry.Point2.prototype.getY=function(){return this.y};rock.geometry.Point2.prototype.setY=function(a){this.y=a};rock.namespace("rock.geometry");rock.geometry.Point3=function(a,b,c){this.x=a;this.y=b;this.z=c};rock.geometry.Point3.prototype.getX=function(){return this.x};rock.geometry.Point3.prototype.setX=function(a){this.x=a};rock.geometry.Point3.prototype.getY=function(){return this.y};rock.geometry.Point3.prototype.setY=function(a){this.y=a};rock.geometry.Point3.prototype.getZ=function(){return this.z};rock.geometry.Point3.prototype.setZ=function(a){this.z=a};
rock.geometry.Point3.prototype.clone=function(){return new rock.geometry.Point3(this.x,this.y,this.z)};rock.namespace("rock.geometry");rock.geometry.Vertex3=function(a,b,c){rock.super_(this,arguments)};rock.extends_(rock.geometry.Vertex3,rock.geometry.Point3);rock.namespace("rock.geometry");rock.geometry.Vector3=function(a,b,c){this.x=a;this.y=b;this.z=c};rock.geometry.Vector3.prototype.normalize=function(){var a=this.module();this.x/=a;this.y/=a;this.z/=a};rock.geometry.Vector3.prototype.module=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};rock.geometry.Vector3.prototype.getX=function(){return this.x};rock.geometry.Vector3.prototype.setX=function(a){this.x=a};rock.geometry.Vector3.prototype.getY=function(){return this.y};
rock.geometry.Vector3.prototype.setY=function(a){this.y=a};rock.geometry.Vector3.prototype.getZ=function(){return this.z};rock.geometry.Vector3.prototype.setZ=function(a){this.z=a};rock.geometry.Vector3.prototype.clone=function(){return new rock.geometry.Vector3(this.x,this.y,this.z)};rock.namespace("rock.geometry");rock.geometry.Matrix3=function(){this.matrix=Array(9);this.identity();this.point3_ma=new rock.geometry.Point3(0,0,0)};rock.geometry.Matrix3.prototype.getAuxiliaryPoint3=function(){var a=this.point3_ma;a.setX(0);a.setY(0);a.setZ(0);return a};rock.geometry.Matrix3.prototype.getMatrixAsArray=function(){return this.matrix};rock.geometry.Matrix3.prototype.identity=function(){for(var a=0;9>a;a++)this.matrix[a]=0;this.matrix[0]=1;this.matrix[4]=1;this.matrix[8]=1};
rock.geometry.Matrix3.prototype.getDeterminant=function(){return this.matrix[0]*this.matrix[4]*this.matrix[8]+this.matrix[3]*this.matrix[7]*this.matrix[2]+this.matrix[6]*this.matrix[1]*this.matrix[5]-(this.matrix[6]*this.matrix[4]*this.matrix[2]+this.matrix[3]*this.matrix[1]*this.matrix[8]+this.matrix[0]*this.matrix[7]*this.matrix[5])};
rock.geometry.Matrix3.prototype.multiplyByPoint3=function(a){var b=this.getAuxiliaryPoint3(),c=a.getX(),d=a.getY();a=a.getZ();b.setX(c*this.getValue(0,0)+d*this.getValue(0,1)+a*this.getValue(0,2));b.setY(c*this.getValue(1,0)+d*this.getValue(1,1)+a*this.getValue(1,2));b.setZ(c*this.getValue(2,0)+d*this.getValue(2,1)+a*this.getValue(2,2));return b};rock.geometry.Matrix3.prototype.setValue=function(a,b,c){this.matrix[3*b+a]=c};
rock.geometry.Matrix3.prototype.getValue=function(a,b){return this.matrix[3*b+a]};rock.namespace("rock.geometry");rock.geometry.Matrix4=function(){this.matrix=Array(16);this.identity();this.adjointMatrix=this.cofactorMatrix=null;this.point3_ma=new rock.geometry.Point3(0,0,0);this.mat3_ma=new rock.geometry.Matrix3;this.multiply_ma=this.mat4_ma=null;this.matAsMat3Result_ma=new rock.geometry.Matrix3};rock.geometry.Matrix4.prototype.getAuxiliaryPoint3=function(){var a=this.point3_ma;a.setX(0);a.setY(0);a.setZ(0);return a};
rock.geometry.Matrix4.prototype.getAuxiliaryMat3=function(){this.mat3_ma.identity();return this.mat3_ma};rock.geometry.Matrix4.prototype.getAuxiliaryMat4=function(){null==this.mat4_ma&&(this.mat4_ma=new rock.geometry.Matrix4);this.mat4_ma.identity();return this.mat4_ma};rock.geometry.Matrix4.prototype.getAuxiliaryMultiply=function(){null==this.multiply_ma&&(this.multiply_ma=new rock.geometry.Matrix4);this.multiply_ma.identity();return this.multiply_ma};
rock.geometry.Matrix4.prototype.getMatrixAsArray=function(){return this.matrix};rock.geometry.Matrix4.prototype.identity=function(){for(var a=0;16>a;a++)this.matrix[a]=0;this.matrix[0]=1;this.matrix[5]=1;this.matrix[10]=1;this.matrix[15]=1};rock.geometry.Matrix4.prototype.initFromMatrix=function(a){var b,c;for(b=0;4>b;b++)for(c=0;4>c;c++)this.setValue(b,c,a.getValue(b,c))};
rock.geometry.Matrix4.prototype.getDeterminant=function(){var a=this.getAuxiliaryMat3(),b=0;a.setValue(0,0,this.matrix[5]);a.setValue(1,0,this.matrix[6]);a.setValue(2,0,this.matrix[7]);a.setValue(0,1,this.matrix[9]);a.setValue(1,1,this.matrix[10]);a.setValue(2,1,this.matrix[11]);a.setValue(0,2,this.matrix[13]);a.setValue(1,2,this.matrix[14]);a.setValue(2,2,this.matrix[15]);b+=this.matrix[0]*a.getDeterminant();a.setValue(0,0,this.matrix[1]);a.setValue(1,0,this.matrix[2]);a.setValue(2,0,this.matrix[3]);
a.setValue(0,1,this.matrix[9]);a.setValue(1,1,this.matrix[10]);a.setValue(2,1,this.matrix[11]);a.setValue(0,2,this.matrix[13]);a.setValue(1,2,this.matrix[14]);a.setValue(2,2,this.matrix[15]);b+=-this.matrix[4]*a.getDeterminant();a.setValue(0,0,this.matrix[1]);a.setValue(1,0,this.matrix[2]);a.setValue(2,0,this.matrix[3]);a.setValue(0,1,this.matrix[5]);a.setValue(1,1,this.matrix[6]);a.setValue(2,1,this.matrix[7]);a.setValue(0,2,this.matrix[13]);a.setValue(1,2,this.matrix[14]);a.setValue(2,2,this.matrix[15]);
b+=this.matrix[8]*a.getDeterminant();a.setValue(0,0,this.matrix[1]);a.setValue(1,0,this.matrix[2]);a.setValue(2,0,this.matrix[3]);a.setValue(0,1,this.matrix[5]);a.setValue(1,1,this.matrix[6]);a.setValue(2,1,this.matrix[7]);a.setValue(0,2,this.matrix[9]);a.setValue(1,2,this.matrix[10]);a.setValue(2,2,this.matrix[11]);return b+=-this.matrix[12]*a.getDeterminant()};
rock.geometry.Matrix4.prototype.getMinor=function(a,b){var c=this.getAuxiliaryMat3(),d,e,f,g;for(d=0;4>d;d++)if(d!=a)for(e=0;4>e;e++)e!=b&&(f=d,g=e,d>a&&f--,e>b&&g--,c.setValue(f,g,this.getValue(d,e)));return c.getDeterminant()};rock.geometry.Matrix4.prototype.getSign=function(a,b){return 0==(a+1+(b+1))%2?1:-1};
rock.geometry.Matrix4.prototype.getCofactorMatrix=function(){null==this.cofactorMatrix&&(this.cofactorMatrix=new rock.geometry.Matrix4);var a=this.cofactorMatrix,b,c;for(b=0;4>b;b++)for(c=0;4>c;c++)a.setValue(b,c,this.getMinor(b,c)*this.getSign(b,c));return a};
rock.geometry.Matrix4.prototype.transpose=function(){var a=this.getAuxiliaryMat4();a.setValue(0,0,this.getValue(0,0));a.setValue(1,0,this.getValue(0,1));a.setValue(2,0,this.getValue(0,2));a.setValue(3,0,this.getValue(0,3));a.setValue(0,1,this.getValue(1,0));a.setValue(1,1,this.getValue(1,1));a.setValue(2,1,this.getValue(1,2));a.setValue(3,1,this.getValue(1,3));a.setValue(0,2,this.getValue(2,0));a.setValue(1,2,this.getValue(2,1));a.setValue(2,2,this.getValue(2,2));a.setValue(3,2,this.getValue(2,3));
a.setValue(0,3,this.getValue(3,0));a.setValue(1,3,this.getValue(3,1));a.setValue(2,3,this.getValue(3,2));a.setValue(3,3,this.getValue(3,3));this.initFromMatrix(a)};rock.geometry.Matrix4.prototype.getAdjoint=function(){null==this.adjointMatrix&&(this.adjointMatrix=new rock.geometry.Matrix4);var a=this.adjointMatrix,b=this.getCofactorMatrix();a.initFromMatrix(b);a.transpose();return a};
rock.geometry.Matrix4.prototype.invert=function(){var a=this.getAuxiliaryMat4(),b=this.getDeterminant();if(0==b)return null;var c=this.getAdjoint();a.setValue(0,0,c.getValue(0,0)/b);a.setValue(1,0,c.getValue(1,0)/b);a.setValue(2,0,c.getValue(2,0)/b);a.setValue(3,0,c.getValue(3,0)/b);a.setValue(0,1,c.getValue(0,1)/b);a.setValue(1,1,c.getValue(1,1)/b);a.setValue(2,1,c.getValue(2,1)/b);a.setValue(3,1,c.getValue(3,1)/b);a.setValue(0,2,c.getValue(0,2)/b);a.setValue(1,2,c.getValue(1,2)/b);a.setValue(2,
2,c.getValue(2,2)/b);a.setValue(3,2,c.getValue(3,2)/b);a.setValue(0,3,c.getValue(0,3)/b);a.setValue(1,3,c.getValue(1,3)/b);a.setValue(2,3,c.getValue(2,3)/b);a.setValue(3,3,c.getValue(3,3)/b);this.initFromMatrix(a)};rock.geometry.Matrix4.prototype.removeTranslation=function(){var a=this.getAuxiliaryMat4(),b,c;for(b=0;3>b;b++)for(c=0;3>c;c++)a.setValue(b,c,this.getValue(b,c));this.initFromMatrix(a)};
rock.geometry.Matrix4.prototype.translate=function(a,b,c){var d=this.getAuxiliaryMat4();d.setValue(0,3,a);d.setValue(1,3,b);d.setValue(2,3,c);this.multiply(d)};rock.geometry.Matrix4.prototype.rotateX=function(a){var b=this.getAuxiliaryMat4(),c=rock.util.GeometryUtils.degToRad(a);a=Math.cos(c);c=Math.sin(c);b.setValue(1,1,a);b.setValue(1,2,-c);b.setValue(2,1,c);b.setValue(2,2,a);this.multiply(b)};
rock.geometry.Matrix4.prototype.rotateY=function(a){var b=this.getAuxiliaryMat4(),c=rock.util.GeometryUtils.degToRad(a);a=Math.cos(c);c=Math.sin(c);b.setValue(0,0,a);b.setValue(0,2,c);b.setValue(2,0,-c);b.setValue(2,2,a);this.multiply(b)};rock.geometry.Matrix4.prototype.rotateZ=function(a){var b=this.getAuxiliaryMat4(),c=rock.util.GeometryUtils.degToRad(a);a=Math.cos(c);c=Math.sin(c);b.setValue(0,0,a);b.setValue(0,1,-c);b.setValue(1,0,c);b.setValue(1,1,a);this.multiply(b)};
rock.geometry.Matrix4.prototype.scale=function(a,b,c){var d=this.getAuxiliaryMat4();d.setValue(0,0,a);d.setValue(1,1,b);d.setValue(2,2,c);this.multiply(d)};rock.geometry.Matrix4.prototype.multiply=function(a){var b=this.getAuxiliaryMultiply(),c,d,e;for(c=0;4>c;c++)for(d=0;4>d;d++)e=this.getValue(c,0)*a.getValue(0,d)+this.getValue(c,1)*a.getValue(1,d)+this.getValue(c,2)*a.getValue(2,d)+this.getValue(c,3)*a.getValue(3,d),b.setValue(c,d,e);this.initFromMatrix(b)};
rock.geometry.Matrix4.prototype.multiplyByPoint3=function(a){var b=this.getAuxiliaryPoint3(),c=a.getX(),d=a.getY();a=a.getZ();b.setX(c*this.getValue(0,0)+d*this.getValue(0,1)+a*this.getValue(0,2)+this.getValue(0,3));b.setY(c*this.getValue(1,0)+d*this.getValue(1,1)+a*this.getValue(1,2)+this.getValue(1,3));b.setZ(c*this.getValue(2,0)+d*this.getValue(2,1)+a*this.getValue(2,2)+this.getValue(2,3));return b};
rock.geometry.Matrix4.prototype.getAsMatrix3=function(){var a=this.matAsMat3Result_ma,b,c;for(b=0;3>b;b++)for(c=0;3>c;c++)a.setValue(b,c,this.getValue(b,c));return a};rock.geometry.Matrix4.prototype.clone=function(){var a=new rock.geometry.Matrix4,b=a.getMatrixAsArray(),c=this.matrix,d;for(d=0;d<c.length;d++)b[d]=c[d];return a};rock.geometry.Matrix4.prototype.setValue=function(a,b,c){this.matrix[4*b+a]=c};rock.geometry.Matrix4.prototype.getValue=function(a,b){return this.matrix[4*b+a]};rock.namespace("rock.geometry");rock.geometry.Rectangle=function(a,b,c,d){this.xMin=a;this.yMin=b;this.xMax=c;this.yMax=d};rock.geometry.Rectangle.prototype.intersectWithPoint=function(a){var b=a.getX();a=a.getY();return this.xMin<=b&&b<=this.xMax&&this.yMin<=a&&a<=this.yMax};
rock.geometry.Rectangle.prototype.getIntersectionWithRectangle=function(a){var b=a.getXMin(),c=a.getYMin(),d=a.getXMax();a=a.getYMax();var e=this.xMin,f=this.yMin,g=this.xMax,h=this.yMax;if(g<b||d<e||h<c||a<f)return null;b>e&&(e=b);b=f;c>b&&(b=c);c=g;d<c&&(c=d);d=h;a<d&&(d=a);return new rock.geometry.Rectangle(e,b,c,d)};rock.geometry.Rectangle.prototype.getWidth=function(){return Math.abs(this.xMax-this.xMin)};rock.geometry.Rectangle.prototype.getHeight=function(){return Math.abs(this.yMax-this.yMin)};
rock.geometry.Rectangle.prototype.getXMin=function(){return this.xMin};rock.geometry.Rectangle.prototype.setXMin=function(a){this.xMin=a};rock.geometry.Rectangle.prototype.getYMin=function(){return this.yMin};rock.geometry.Rectangle.prototype.setYMin=function(a){this.yMin=a};rock.geometry.Rectangle.prototype.getXMax=function(){return this.xMax};rock.geometry.Rectangle.prototype.setXMax=function(a){this.xMax=a};rock.geometry.Rectangle.prototype.getYMax=function(){return this.yMax};
rock.geometry.Rectangle.prototype.setYMax=function(a){this.yMax=a};rock.namespace("rock.geometry");rock.geometry.BBOX=function(a,b,c,d,e,f){this.xMin=a;this.xMax=b;this.yMin=c;this.yMax=d;this.zMin=e;this.zMax=f;this.center_ma=new rock.geometry.Point3(0,0,0)};rock.geometry.BBOX.prototype.intersectWithPoint=function(a){var b=a.getX(),c=a.getY();a=a.getZ();return this.xMin<=b&&b<=this.xMax&&this.yMin<=c&&c<=this.yMax&&this.zMin<=a&&a<=this.zMax};
rock.geometry.BBOX.prototype.getCenter=function(){var a=this.center_ma;a.setX((this.xMin+this.xMax)/2);a.setY((this.yMin+this.yMax)/2);a.setZ((this.zMin+this.zMax)/2);return a};rock.geometry.BBOX.prototype.join=function(a){var b=a.getXMin(),c=a.getXMax(),d=a.getYMin(),e=a.getYMax(),f=a.getZMin();a=a.getZMax();b<this.xMin&&(this.xMin=b);c>this.xMax&&(this.xMax=c);d<this.yMin&&(this.yMin=d);e>this.yMax&&(this.yMax=e);f<this.zMin&&(this.zMin=f);a>this.zMax&&(this.zMax=a)};
rock.geometry.BBOX.prototype.getXMin=function(){return this.xMin};rock.geometry.BBOX.prototype.setXMin=function(a){this.xMin=a};rock.geometry.BBOX.prototype.getXMax=function(){return this.xMax};rock.geometry.BBOX.prototype.setXMax=function(a){this.xMax=a};rock.geometry.BBOX.prototype.getYMin=function(){return this.yMin};rock.geometry.BBOX.prototype.setYMin=function(a){this.yMin=a};rock.geometry.BBOX.prototype.getYMax=function(){return this.yMax};
rock.geometry.BBOX.prototype.setYMax=function(a){this.yMax=a};rock.geometry.BBOX.prototype.getZMin=function(){return this.zMin};rock.geometry.BBOX.prototype.setZMin=function(a){this.zMin=a};rock.geometry.BBOX.prototype.getZMax=function(){return this.zMax};rock.geometry.BBOX.prototype.setZMax=function(a){this.zMax=a};rock.geometry.BBOX.prototype.getTranslatedBBOX=function(a,b,c){return new rock.geometry.BBOX(this.xMin+a,this.xMax+a,this.yMin+b,this.yMax+b,this.zMin+c,this.zMax+c)};
rock.geometry.BBOX.prototype.getScaledBBOX=function(a,b,c){return new rock.geometry.BBOX(this.xMin*a,this.xMax*a,this.yMin*b,this.yMax*b,this.zMin*c,this.zMax*c)};
rock.geometry.BBOX.prototype.getRotatedBBOX=function(a,b,c){var d,e=this.xMin,f=this.xMax,g=this.yMin,h=this.yMax,j=this.zMin,k=this.zMax;d=new rock.geometry.Point3(0,0,0);var l=[],m=new rock.geometry.Matrix4;m.identity();m.rotateX(a);m.rotateY(b);m.rotateZ(c);d.setX(e);d.setY(g);d.setZ(j);l.push(m.multiplyByPoint3(d).clone());d.setX(e);d.setY(g);d.setZ(k);l.push(m.multiplyByPoint3(d).clone());d.setX(f);d.setY(g);d.setZ(j);l.push(m.multiplyByPoint3(d).clone());d.setX(f);d.setY(g);d.setZ(k);l.push(m.multiplyByPoint3(d).clone());
d.setX(e);d.setY(h);d.setZ(j);l.push(m.multiplyByPoint3(d).clone());d.setX(e);d.setY(h);d.setZ(k);l.push(m.multiplyByPoint3(d).clone());d.setX(f);d.setY(h);d.setZ(j);l.push(m.multiplyByPoint3(d).clone());d.setX(f);d.setY(h);d.setZ(k);l.push(m.multiplyByPoint3(d).clone());d=l[0];f=e=d.getX();h=g=d.getY();k=j=d.getZ();for(a=1;a<l.length;a++)d=l[a],b=d.getX(),c=d.getY(),d=d.getZ(),b<e&&(e=b),b>f&&(f=b),c<g&&(g=c),c>h&&(h=c),d<j&&(j=d),d>k&&(k=d);return new rock.geometry.BBOX(e,f,g,h,j,k)};
rock.geometry.BBOX.prototype.clone=function(){return new rock.geometry.BBOX(this.xMin,this.xMax,this.yMin,this.yMax,this.zMin,this.zMax)};rock.namespace("rock.util");
rock.util.GeometryUtils={degToRad:function(a){return 2*a*Math.PI/360},radToDeg:function(a){return 360*a/(2*Math.PI)},crossProduct:function(a,b,c){rock.util.JsUtils.isNullOrUndefined(c)&&(c=new rock.geometry.Vector3(0,0,0));c.setX(a.getY()*b.getZ()-a.getZ()*b.getY());c.setY(a.getZ()*b.getX()-a.getX()*b.getZ());c.setZ(a.getX()*b.getY()-a.getY()*b.getX());return c},getPointMakesSameCenter:function(a,b,c,d,e){b=a.getX()+(b-d)/2;a=a.getY()+(c-e)/2;return new rock.geometry.Point2(Math.round(b),Math.round(a))},
normalizeAngle:function(a){for(;0>a;)a+=360;return a%360}};rock.namespace("rock.network");rock.network.HTTPRequestParams=function(a,b,c){this.url=a;this.method=b;rock.util.JsUtils.isNullOrUndefined(this.method)&&(this.method=rock.constants.HTTP_METHOD_GET);this.HTTPParams=c};rock.network.HTTPRequestParams.prototype.getUrl=function(){return this.url};rock.network.HTTPRequestParams.prototype.setUrl=function(a){this.url=a};rock.network.HTTPRequestParams.prototype.getMethod=function(){return this.method};
rock.network.HTTPRequestParams.prototype.setMethod=function(a){this.method=a};rock.network.HTTPRequestParams.prototype.getHTTPParams=function(){return this.HTTPParams};rock.network.HTTPRequestParams.prototype.setHTTPParams=function(a){this.HTTPParams=a};rock.namespace("rock.network.ajax.event");rock.network.ajax.event.AjaxEvent=function(a,b,c){rock.super_(this,[rock.network.ajax.event.AjaxEvent.AJAX_EVENT]);this.responseText=a;this.error=b;this.httpRequest=c};rock.extends_(rock.network.ajax.event.AjaxEvent,rock.event.Event);rock.network.ajax.event.AjaxEvent.AJAX_EVENT="AJAX_EVENT";rock.network.ajax.event.AjaxEvent.prototype.getResponseText=function(){return this.responseText};
rock.network.ajax.event.AjaxEvent.prototype.setResponseText=function(a){this.responseText=a};rock.network.ajax.event.AjaxEvent.prototype.getError=function(){return this.error};rock.network.ajax.event.AjaxEvent.prototype.setError=function(a){this.error=a};rock.network.ajax.event.AjaxEvent.prototype.getHttpRequest=function(){return this.httpRequest};rock.network.ajax.event.AjaxEvent.prototype.setHttpRequest=function(a){this.httpRequest=a};rock.namespace("rock.network.ajax");rock.network.ajax.AjaxRequest=function(a){rock.super_(this);this.url=a.getUrl();this.method=a.getMethod();this.httpParams=a.getHTTPParams();this.httpRequest=null};rock.extends_(rock.network.ajax.AjaxRequest,rock.event.EventDispatcher);
rock.network.ajax.AjaxRequest.prototype.createHttpRequest=function(){var a=null;if(window.XMLHttpRequest&&window.FormData)a=new XMLHttpRequest;else throw new rock.error.RockError(rock.resource.rockResourceManager.getString("AJAX_NOT_SUPPORTED"));return a};
rock.network.ajax.AjaxRequest.prototype.doCall=function(){var a=this.httpRequest=this.createHttpRequest();a.onreadystatechange=rock.createEventHandler(this,this.processRequest,[]);var b=this.getParamsURLFormat(this.httpParams),c=this.url;!rock.isNullOrUndefined(b)&&this.method==rock.constants.HTTP_METHOD_GET&&(c=this.concatParamToURL(c,b));a.open(this.method,c,!0);c=null;!rock.isNullOrUndefined(b)&&this.method==rock.constants.HTTP_METHOD_POST&&(c=b,a.setRequestHeader("Content-type","application/x-www-form-urlencoded"));
a.send(c)};rock.network.ajax.AjaxRequest.prototype.concatParamToURL=function(a,b){var c=a;return c=rock.util.JsUtils.stringContains(a,"?")?rock.util.JsUtils.stringEndsWith(a,"&")||rock.util.JsUtils.stringEndsWith(a,"?")?c+b:c+"&"+b:c+"?"+b};rock.network.ajax.AjaxRequest.prototype.getParamsURLFormat=function(a){if(rock.util.JsUtils.isNullOrUndefined(a))return null;var b="",c,d=!0,e=!1;for(c in a)a.hasOwnProperty(c)&&(d?d=!1:b+="&",b=b+c+"="+encodeURI(a[c]),e=!0);return e?b:null};
rock.network.ajax.AjaxRequest.prototype.cancelRequest=function(){this.httpRequest.abort()};rock.network.ajax.AjaxRequest.prototype.processRequest=function(){if(4==this.httpRequest.readyState){var a=null,b=!0;200==this.httpRequest.status&&(a=this.httpRequest.responseText,b=!1);a=new rock.network.ajax.event.AjaxEvent(a,b,this.httpRequest);this.dispatchEvent(a)}};rock.namespace("rock.resource.window");
rock.window.ResourceLoaderWindow=function(a){rock.super_(this,arguments);this.resourceLoaderManager=new rock.resource.loader.ResourceLoaderManager;this.resourceLoaderManager.addEventListener(rock.resource.event.ResourceLoadedEvent.RESOURCE_LOADED,rock.createEventHandler(this,this.resourceLoaded));this.resourceLoaderManager.addEventListener(rock.resource.event.ResourceLoaderComplete.RESOURCE_LOADER_COMPLETE,rock.createEventHandler(this,this.resourceLoaderManagerComplete));this.margin=5;this.progressBar=
new rock.window.component.ProgressBarComponent(this);this.setProgressBarWidth(this.windowSystem.getWidth()/2);this.setProgressBarHeight(30);this.addComponent(this.progressBar);this.label=new rock.window.component.Label(this,rock.resource.rockResourceManager.getString("RESOURCE_WINDOW_LOADING_LABEL"));this.addComponent(this.label)};rock.extends_(rock.window.ResourceLoaderWindow,rock.window.Window);rock.window.ResourceLoaderWindow.prototype.setProgressBarWidth=function(a){this.progressBar.setWidth(a)};
rock.window.ResourceLoaderWindow.prototype.setProgressBarHeight=function(a){this.progressBar.setHeight(a)};rock.window.ResourceLoaderWindow.prototype.loadResources=function(a){this.resourceLoaderManager.loadResources(a)};rock.window.ResourceLoaderWindow.prototype.resourceLoaded=function(){this.progressBar.setPercentLoaded(this.resourceLoaderManager.getPercentLoaded());this.redraw()};
rock.window.ResourceLoaderWindow.prototype.resourceLoaderManagerComplete=function(){var a=new rock.resource.event.ResourceWindowCompleteEvent;this.dispatchEvent(a)};
rock.window.ResourceLoaderWindow.prototype.updateComponents=function(){var a=new rock.geometry.Point2(0,0),b=rock.util.GeometryUtils.getPointMakesSameCenter(a,this.windowSystem.getWidth(),this.windowSystem.getHeight(),this.progressBar.getComputedWidth(),this.progressBar.getComputedHeight());this.progressBar.setX(b.getX());this.progressBar.setY(b.getY());var c=this.label,b=c.getComputedWidth(),c=c.getComputedHeight(),b=rock.util.GeometryUtils.getPointMakesSameCenter(a,this.windowSystem.getWidth(),
this.windowSystem.getHeight(),b,c);this.label.setX(b.getX());this.label.setY(this.progressBar.getY()-(c+this.margin))};rock.window.ResourceLoaderWindow.prototype.draw=function(a){this.updateComponents();rock.super_method(this,rock.window.ResourceLoaderWindow,"draw",[a])};rock.window.ResourceLoaderWindow.prototype.getResourceLoaderManager=function(){return this.resourceLoaderManager};rock.window.ResourceLoaderWindow.prototype.getLabel=function(){return this.label};rock.namespace("rock.app");rock.app.InitApplicationParams=function(a,b,c,d,e,f){this.idDiv=a;this.width=b;this.height=c;this.contextType=d;this.urlResources=e;this.contextCreationParams=f;this.scaleFactor=null};rock.app.InitApplicationParams.prototype.getIdDiv=function(){return this.idDiv};rock.app.InitApplicationParams.prototype.getWidth=function(){return this.width};rock.app.InitApplicationParams.prototype.getHeight=function(){return this.height};
rock.app.InitApplicationParams.prototype.getContextType=function(){return this.contextType};rock.app.InitApplicationParams.prototype.getUrlResources=function(){return this.urlResources};rock.app.InitApplicationParams.prototype.getContextCreationParams=function(){return this.contextCreationParams};rock.app.InitApplicationParams.prototype.getScaleFactor=function(){return this.scaleFactor};rock.app.InitApplicationParams.prototype.setScaleFactor=function(a){this.scaleFactor=a};rock.namespace("rock.app");rock.app.Application=function(a){rock.super_(this);this.windowSystem=this.canvas=this.idDiv=null;this.resourceManager=new rock.resource.ResourceManager;this.styleManager=new rock.window.style.StyleManager;this.scaleFactor=1;this.locale=null;this.setLocale(rock.constants.DEFAULT_ROCK_LOCALE);this.urlResources=null;this.DEFAULT_WEBGL_CONTEXT_CREATION_PARAMS={premultipliedAlpha:!1,preserveDrawingBuffer:!0};this.init(a);this.start()};rock.extends_(rock.app.Application,rock.event.EventDispatcher);
rock.app.Application.prototype.init=function(a){this.idDiv=a.getIdDiv();var b=rock.util.JsUtils.generateUUID();this.id="ROCK_APP_"+b;var c=a.getWidth(),d=a.getHeight(),e=rock.util.DOMUtils.getElementById(this.idDiv),f=rock.util.DOMUtils.createCanvas(c,d,0);f.setAttribute("id","ROCK_CANVAS_"+b);b=rock.util.DOMUtils.createHTMLElement(rock.constants.DIV_TAG);b.style[rock.constants.CSS_POSITION]=rock.constants.CSS_POSITION_RELATIVE;b.style[rock.constants.CSS_WIDTH]=c+"px";b.style[rock.constants.CSS_HEIGHT]=
d+"px";b.appendChild(f);e.appendChild(b);this.urlResources=a.getUrlResources();var e=a.getScaleFactor(),g,h;rock.util.JsUtils.isNullOrUndefined(e)||(g=c*e+"px",h=d*e+"px",b.style[rock.constants.CSS_WIDTH]=g,b.style[rock.constants.CSS_HEIGHT]=h,f.style[rock.constants.CSS_WIDTH]=g,f.style[rock.constants.CSS_HEIGHT]=h,this.scaleFactor=e);this.canvas=f;b=new rock.window.WindowSystem(this);b.setWidth(c);b.setHeight(d);b.init();this.windowSystem=b;a=this.createGraphicsEngine(f,a.getContextType(),a.getContextCreationParams());
b.setGraphicsEngine(a)};rock.app.Application.LOCALE_CHANGED_EVENT="LOCALE_CHANGED_EVENT";rock.app.Application.prototype.resolveContextCreationParams=function(a,b){var c={};a==rock.constants.CONTEXT_WEBGL&&rock.addProperties(c,this.DEFAULT_WEBGL_CONTEXT_CREATION_PARAMS);rock.util.JsUtils.isNullOrUndefined(b)||rock.addProperties(c,b);return c};
rock.app.Application.prototype.instantiateGraphicsEngine=function(a,b){var c=null,d=null;b==rock.constants.CONTEXT_CANVAS_2D?(d=new rock.graphics.engine.canvas2d.Canvas2DContext(this,a),c=new rock.graphics.engine.canvas2d.Canvas2DGraphicsEngine(d)):b==rock.constants.CONTEXT_WEBGL&&(d=new rock.graphics.engine.webgl.WebGLContext(this,a),c=new rock.graphics.engine.webgl.WebGLGraphicsEngine(d));return c};
rock.app.Application.prototype.createGraphicsEngine=function(a,b,c){if(!a.getContext)throw new rock.error.RockError(rock.resource.rockResourceManager.getString("NO_GET_CONTEXT_CANVAS"));c=this.resolveContextCreationParams(b,c);a=this.getContext(a,b,c);if(rock.isNullOrUndefined(a))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("NO_CONTEXT_CANVAS_AVAILABLE"));return this.instantiateGraphicsEngine(a,b)};
rock.app.Application.prototype.getContext=function(a,b,c){var d=null;if(b==rock.constants.CONTEXT_CANVAS_2D)d=a.getContext(rock.constants.CANVAS_CONTEXT_2D);else if(b==rock.constants.CONTEXT_WEBGL)d=a.getContext(rock.constants.CANVAS_CONTEXT_WEBGL,c)||a.getContext(rock.constants.CANVAS_CONTEXT_EXPERIMENTAL_WEBGL,c)||a.getContext(rock.constants.CANVAS_CONTEXT_WEBKIT_3D,c)||a.getContext(rock.constants.CANVAS_CONTEXT_MOZ_WEBGL,c),this.handleWebGLContextEvents(a);else throw new rock.error.RockError(rock.resource.rockResourceManager.getString("INVALID_ROCK_CONTEXT_CANVAS_TYPE"));
return d};rock.app.Application.prototype.handleWebGLContextEvents=function(a){rock.util.DOMUtils.addEventListener(a,rock.constants.WEBGL_CONTEXT_LOST_EVENT,rock.createEventHandler(this,this.onContextLost));rock.util.DOMUtils.addEventListener(a,rock.constants.WEBGL_CONTEXT_RESTORED_EVENT,rock.createEventHandler(this,this.onContextRestored))};rock.app.Application.prototype.onContextLost=function(a){a.preventDefault();this.dispatchEvent(new rock.event.Event(rock.constants.ROCK_EVENT_CONTEXT_LOST))};
rock.app.Application.prototype.onContextRestored=function(){this.dispatchEvent(new rock.event.Event(rock.constants.ROCK_EVENT_CONTEXT_RESTORED));this.windowSystem.draw()};rock.app.Application.prototype.draw=function(){this.windowSystem.draw()};rock.app.Application.prototype.setLocale=function(a){this.locale=a;this.getResourceManager().setLocale(this.locale);this.dispatchEvent(new rock.event.Event(rock.app.Application.LOCALE_CHANGED_EVENT))};rock.app.Application.prototype.start=rock.abstract_;
rock.app.Application.prototype.getId=function(){return this.id};rock.app.Application.prototype.getCanvas=function(){return this.canvas};rock.app.Application.prototype.getWindowSystem=function(){return this.windowSystem};rock.app.Application.prototype.getResourceManager=function(){return this.resourceManager};rock.app.Application.prototype.getStyleManager=function(){return this.styleManager};rock.app.Application.prototype.getScaleFactor=function(){return this.scaleFactor};rock.namespace("rock.test");rock.test.TestSuite=function(){this.currentTestFailed=null;this.reset()};rock.test.TestSuite.prototype.reset=function(){this.currentTestFailed=!1};rock.test.TestSuite.prototype.hasCurrentTestFailed=function(){return this.currentTestFailed};rock.test.TestSuite.prototype.setUp=function(){};rock.test.TestSuite.prototype.tearDown=function(){};rock.test.TestSuite.prototype.assertTrue=function(a){a||this.markCurrentTestAsFailed()};
rock.test.TestSuite.prototype.assertFalse=function(a){a&&this.markCurrentTestAsFailed()};rock.test.TestSuite.prototype.assertEquals=function(a,b){a!==b&&this.markCurrentTestAsFailed()};rock.test.TestSuite.prototype.assertNotEquals=function(a,b){a===b&&this.markCurrentTestAsFailed()};rock.test.TestSuite.prototype.assertNull=function(a){null!==a&&this.markCurrentTestAsFailed()};rock.test.TestSuite.prototype.assertNullOrUndefined=function(a){rock.util.JsUtils.isNullOrUndefined(a)||this.markCurrentTestAsFailed()};
rock.test.TestSuite.prototype.assertNotNull=function(a){null===a&&this.markCurrentTestAsFailed()};rock.test.TestSuite.prototype.assertError=function(a,b,c,d){var e=null;try{c.apply(b,d)}catch(f){e=f}e?a!=e.message&&this.markCurrentTestAsFailed():this.markCurrentTestAsFailed()};rock.test.TestSuite.prototype.markCurrentTestAsFailed=function(){this.currentTestFailed=!0};rock.namespace("rock.test");rock.test.TestSuiteResult=function(){this.resultByTest=[]};rock.test.TestSuiteResult.prototype.addResultForTest=function(a,b){this.resultByTest.push({name:a,failed:b})};rock.test.TestSuiteResult.prototype.someTestFailed=function(){var a=this.resultByTest,b=!1,c;for(c=0;c<a.length;c++)b=b||a[c].failed;return b};
rock.test.TestSuiteResult.prototype.toString=function(){var a="",a=this.someTestFailed()?a+rock.resource.rockResourceManager.getString("TEST_SUITE_RESULT_KO"):a+rock.resource.rockResourceManager.getString("TEST_SUITE_RESULT_OK"),b,c=this.resultByTest;for(b=0;b<c.length;b++)a=c[b].failed?a+rock.resource.rockResourceManager.getString("TEST_RESULT_KO",[c[b].name]):a+rock.resource.rockResourceManager.getString("TEST_RESULT_OK",[c[b].name]);return a};rock.namespace("rock.test");rock.test.TestRunner=function(){};rock.test.TestRunner.TEST_PREFIX="test";rock.test.TestRunner.prototype.runTestSuite=function(a){if(!rock.instanceof_(a,rock.test.TestSuite))throw new rock.error.RockError(rock.resource.rockResourceManager.getString("TEST_INVALID_TYPE"));var b=new rock.test.TestSuiteResult,c,d;for(c in a)d=a[c],rock.isFunction(d)&&rock.util.JsUtils.stringStartsWith(c,rock.test.TestRunner.TEST_PREFIX)&&b.addResultForTest(c,this.runTest(a,c));return b};
rock.test.TestRunner.prototype.runTest=function(a,b){a.reset();a.setUp();try{a[b]()}catch(c){a.markCurrentTestAsFailed()}a.tearDown();return a.hasCurrentTestFailed()};
